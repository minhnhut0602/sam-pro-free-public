'use strict';var sam={};(function(b){var a,c=options.media,d=parseInt(options.item,10),e=options.locale.changeLocale?options.locale.locale:'en-US',f=options.strings;sam.media=a={},sam.media=a={buttonId:'#banner-media',adUrl:'#img',adImgId:'#img_id',adName:'#title',adDesc:'#description',adAlt:'#alt',init:function init(){b(this.buttonId).on('click',this.openMediaDialog)},openMediaDialog:function openMediaDialog(b){var d=this;return b.preventDefault(),this._frame?void this._frame.open():void(this._frame=a.frame=wp.media({title:c.title,button:{text:c.button},multiple:!1,library:{type:'image'}}),this._frame.state('library').on('select',function(){var b=d.get('selection').single();a.handleMediaAttachment(b)}),this._frame.open())},handleMediaAttachment:function handleMediaAttachment(c){var a=c.toJSON();b(this.adUrl).val(a.url),b(this.adImgId).val(a.id),''===b(this.adName).val()&&''!==a.title&&b(this.adName).val(a.title),''===b(this.adDesc).val()&&''!==a.caption&&b(this.adDesc).val(a.caption),''===b(this.adAlt).val()&&''!==a.alt&&b(this.adAlt).val(a.alt)}},b(document).ready(function(){b('#tabs').ejTab({enablePersistence:!0}),a.init();var c=b('#rc-ami'),g=b('#rc-amc'),h=b('#rc-amd');b('input:radio[name=amode]').on('click',function(){var a=parseInt(b('input:radio[name=amode]:checked').val(),10);0===a?(c.is(':hidden')&&c.show('blind',{direction:'vertical'},500),g.is(':visible')&&g.hide('blind',{direction:'vertical'},500),h.is(':visible')&&h.hide('blind',{direction:'vertical'},500)):1===a?(g.is(':hidden')&&g.show('blind',{direction:'vertical'},500),c.is(':visible')&&c.hide('blind',{direction:'vertical'},500),h.is(':visible')&&h.hide('blind',{direction:'vertical'},500)):2===a&&(h.is(':hidden')&&h.show('blind',{direction:'vertical'},500),g.is(':visible')&&g.hide('blind',{direction:'vertical'},500),c.is(':visible')&&c.hide('blind',{direction:'vertical'},500))});var i=b('#rc-sale'),j=b('#sale'),k=b('#rc-sale-mode');j.on('click',function(){j.is(':checked')?i.show('blind',{direction:'vertical'},500):i.hide('blind',{direction:'vertical'},500)}),b('input:radio[name=sale_mode]').on('click',function(){var a=parseInt(b('input:radio[name=sale_mode]:checked').val(),10);0===a?k.is(':hidden')&&k.show('blind',{direction:'vertical'},500):k.is(':visible')&&k.hide('blind',{direction:'vertical'},500)});var l=b('#code_before'),m=b('#code_after'),n=b('#width').val()+'px',o=b('#height').val()+'px',p=b('#cnt_style');b('.cnt-helper').on('click',function(a){var b=a.currentTarget;switch(b.id){case'cnt-center':p.text('display: flex; justify-content: center; align-items: center;');break;case'cnt-left':p.text('display: flex; justify-content: start; align-items: start;');break;case'cnt-right':p.text('display: flex; justify-content: end; align-items: end;');break;case'cnt-float-left':p.text('float: left; width: '+n+'; display: flex; justify-content: center; align-items: center;');break;case'cnt-float-right':p.text('float: right; width: '+n+'; display: flex; justify-content: center; align-items: center;');break;case'cnt-sizes':p.text(p.text()+' width: '+n+'; height: '+o+';');break;default:}}),b('label[for="cnt_direction_0"]').qtip({content:{text:options.tooltip.row.content,title:options.tooltip.row.title},style:{classes:'qtip-dark',width:'275px'},position:{my:'left center'}}),b('label[for="cnt_direction_1"]').qtip({content:{text:options.tooltip.column.content,title:options.tooltip.column.title},style:{classes:'qtip-dark',width:'275px'},position:{my:'left center'}});var q=b('#sdate'),r=b('#fdate'),s=b('#startDate').ejDateTimePicker({width:250,locale:e,buttonText:options.buttonText,dateTimeFormat:'yyyy-MM-dd HH:mm:ss',timeDisplayFormat:'HH:mm:ss',value:q.val(),change:function change(a){q.val(a.value)}}).data('ejDateTimePicker'),t=b('#finishDate').ejDateTimePicker({width:250,locale:e,buttonText:options.buttonText,dateTimeFormat:'yyyy-MM-dd HH:mm:ss',timeDisplayFormat:'HH:mm:ss',value:r.val(),change:function change(a){r.val(a.value)}}).data('ejDateTimePicker');if(0<d){var u=function(){v=ej.DataManager({url:ajaxurl+'?action=list_ads&pid='+d+'&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),w=b('#adsGrid').ejGrid({dataSource:v,locale:e,allowTextWrap:!0,allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},columns:[{field:'aid',headerText:f.adId,isPrimaryKey:!0,textAlign:ej.TextAlign.Right,width:120},{field:'title',headerText:f.name,width:280},{field:'description',headerText:f.desc,width:400}],rowSelected:function rowSelected(a){if(!y.service){y.page=a.model.pageSettings.currentPage;var b=y.pids[y.page].slice(0),c=b.indexOf(a.data.aid);-1<c?y.removePid(a.data.aid):y.pids=a.data.aid}},actionComplete:function actionComplete(a){var b=y.ids.slice(0);if(y.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].aid&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(y.page=a.currentPage,y.pids=this.model.currentViewData[c].aid):'refresh'===a.requestType&&(y.page=1,y.pids=this.model.currentViewData[c].aid));y.service=!1}}).data('ejGrid'),y.sid='',x.open()},v=void 0,w=void 0,x=b('#adsDialog').ejDialog({width:830,allowDraggable:!0,enableModal:!0,showOnInit:!1}).data('ejDialog'),y=new Selectors,z=ej.DataManager({url:ajaxurl+'?action=load_places_ads_item&pid='+d+'&sam_pro_nonce='+options.samProNonce,removeUrl:ajaxurl+'?action=unlink_ad_item&pid='+d+'&sam_pro_nonce='+options.samProNonce,updateUrl:ajaxurl+'?action=update_place_ad&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),A=b('#grid').ejGrid({dataSource:z,locale:e,allowSorting:!0,allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},allowSelection:!0,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},editSettings:{allowEditing:!0,allowDeleting:!0,showDeleteConfirmDialog:!0},toolbarSettings:{showToolbar:!0,toolbarItems:['edit',ej.Grid.ToolBarItems.Update,ej.Grid.ToolBarItems.Cancel,ej.Grid.ToolBarItems.Delete],customToolbarItems:['Link','Edit_Ad','Refresh']},columns:[{field:'pid',headerText:'Place ID',visible:!1},{field:'aid',headerText:f.adId,isPrimaryKey:!0,allowEditing:!1,textAlign:ej.TextAlign.Right,width:90},{field:'title',headerText:f.name,allowEditing:!1,width:180},{field:'description',headerText:f.desc,allowEditing:!1},{field:'weight',headerText:f.weight,textAlign:ej.TextAlign.Right,allowEditing:!0,editType:ej.Grid.EditingType.Numeric,defaultValue:10,validationRules:{range:[0,10]},width:100},{field:'trash',headerText:f.status,allowEditing:!1,textAlign:ej.TextAlign.Center,width:100}],create:function create(){b('.Link').parent('li').attr('title',f.linkAds),b('#grid_delete').attr('title',f.unlinkAd),b('.Refresh').parent('li').attr('title',f.refresh),b('.Edit_Ad').parent('li').attr('title',f.editAd)},toolbarClick:function toolbarClick(a){var c=b(a.target),d=this.getSelectedRecords();if(c.hasClass('Refresh'))this.refreshContent();else if(c.hasClass('Link'))u();else if(c.hasClass('Edit_Ad')&&0<d.length){var e=d[0].aid;document.location=options.adEditorUrl+e}},actionComplete:function actionComplete(){var a,c=b('#grid_toolbarItems');a=b('#grid_delete'),c.ejToolbar('disableItem',a),a=b('#grid_Edit_Ad'),c.ejToolbar('disableItem',a)},recordClick:function recordClick(){var a,c=b('#grid_toolbarItems'),d=this.getSelectedRecords(),e=0===d.length?'disableItem':'enableItem';a=b('#grid_delete'),c.ejToolbar(e,a),a=b('#grid_Edit_Ad'),c.ejToolbar(e,a)}}).data('ejGrid');b('#cancel-ads').on('click',function(){x.close(),w.destroy()}),b('#select-ads').on('click',function(){var a=y.sid;''!==a&&b.post(ajaxurl+'?action=link_ads',{pid:d,sid:a,sam_pro_nonce:options.samProNonce}).done(function(){return A.refreshContent()}),x.close(),w.destroy()})}})})(jQuery);

//# sourceMappingURL=sam.pro.place.editor.min.js.map