{"version":3,"sources":["../js-src/sam.pro.ads.list.js"],"names":[],"mappings":"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","file":"sam.pro.ads.list.min.js","sourcesContent":["/**\n * Created by minimus on 25.12.2014.\n */\n\n(function ($) {\n  const ejLocale = (options.locale.changeLocale) ? options.locale.locale : 'en-US';\n  const localeStrings = options.strings;\n  const moderateURI = options.samProAjaxModerate;\n\n  $(document).ready(function () {\n    let lis;\n    const dm = ej.DataManager({\n      url: `${ajaxurl}?action=load_ads&sam_pro_nonce=${options.samProNonce}`,\n      removeUrl: `${ajaxurl}?action=remove_ad&sam_pro_nonce=${options.samProNonce}`,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n\n    const grid = $('#grid').ejGrid({\n      dataSource: dm,\n      locale: ejLocale,\n      allowTextWrap: true,\n      allowPaging: true,\n      allowSorting: true,\n      allowFiltering: true,\n      filterSettings: {filterType: 'menu'},\n      pageSettings: {pageSize: options.itemsPerPage},\n      allowSelection: true,\n      selectionSettings: {selectionMode: [ej.Grid.SelectionMode.Row], enableToggle: true},\n      editSettings: {allowDeleting: true, showDeleteConfirmDialog : true},\n      toolbarSettings: {\n        showToolbar: true,\n        toolbarItems: [\n          ej.Grid.ToolBarItems.Delete\n        ],\n        customToolbarItems: [\n          {templateID: '#viewMode'},\n          'Refresh',\n          {templateID: '#NewAd'},\n          \"Edit\",\n          {templateID: \"#ModerateAd\"},\n          {templateID: \"#UnModerateAd\"},\n          {templateID: \"#TrashPlace\"},\n          {templateID: \"#UnTrashPlace\"}\n        ]\n      },\n      toolbarClick: function (sender, args) {\n        const tbarObj = $(sender.target);\n        const rec = this.getSelectedRecords();\n        let aid;\n        if (tbarObj.hasClass(\"Refresh\"))\n          this.refreshContent();\n        if(tbarObj.hasClass('Edit')) {\n          if(rec.length > 0) {\n            const item = rec[0].aid;\n            document.location = options.editorUrl + item;\n          }\n        }\n        else if (tbarObj.hasClass('place-to-trash') || tbarObj.hasClass('place-from-trash')) {\n          const toFrom = ((tbarObj.hasClass('place-to-trash')) ? 1 : 0);\n          if (rec.length > 0) {\n            const trash = parseInt(rec[0].trash, 10);\n            aid = parseInt(rec[0].aid, 10);\n            if (trash !== toFrom) {\n              $.post(ajaxurl, {\n                action: 'trash_ad',\n                aid: aid,\n                trash: toFrom,\n                sam_pro_nonce: options.samProNonce\n              }).done((data) => {\n                const sel = parseInt(ddList.getSelectedValue(), 10);\n                if (sel === 0) grid._disabledToolItems.push(lis[8]);\n                else if (sel === 1) grid._disabledToolItems.push(lis[7]);\n                grid.refreshContent();\n              });\n            }\n          }\n        }\n        else if(tbarObj.hasClass('ad-moderate') || tbarObj.hasClass('ad-unmoderate')) {\n          const mod = ((tbarObj.hasClass('ad-moderate')) ? 1 : 0);\n          if(rec.length > 0) {\n            const moderated = parseInt(rec[0].moderated, 10);\n\n            aid = parseInt(rec[0].aid, 10);\n            if(moderated !== mod) {\n              $.post(moderateURI, {\n                action: 'moderate_ad',\n                aid: aid,\n                mod: mod,\n                sam_pro_nonce: options.samProNonce\n              }).done(() => {\n                grid.refreshContent();\n              });\n            }\n          }\n        }\n      },\n      create: function (args) {\n        const $toolbar = $('#grid_toolbarItems');\n        lis = $toolbar.find(\"li\");\n        $('.place-to-trash').parent('li').attr('title', localeStrings.moveToTrash);\n        $('.place-from-trash').parent('li').attr('title', localeStrings.restoreFromTrash);\n        $('.ad-moderate').parent('li').attr('title', localeStrings.approve);\n        $('.ad-unmoderate').parent('li').attr('title', localeStrings.cancelApproval);\n        $('#view-mode').parent('li').attr('title', localeStrings.viewMode);\n        $('li[title=\"NewAd\"]').attr('title', localeStrings.newAd);\n        $('li[title=\"Edit\"]').attr('title', localeStrings.edit);\n        $('.Refresh').parent('li').attr('title', localeStrings.refresh);\n      },\n      actionComplete: function(args) {\n        if (args.requestType === 'refresh') {\n          const $tb = $('#grid_toolbarItems');\n          let li;\n          li = $('#grid_delete');\n          $tb.ejToolbar('disableItem', li);\n          li = $('#grid_Edit');\n          $tb.ejToolbar('disableItem', li);\n          li = $('#grid_ModerateAd');\n          $tb.ejToolbar('disableItem', li);\n          li = $('#grid_UnModerateAd');\n          $tb.ejToolbar('disableItem', li);\n          li = $('#grid_TrashPlace');\n          $tb.ejToolbar('disableItem', li);\n          li = $('#grid_UnTrashPlace');\n          $tb.ejToolbar('disableItem', li);\n        }\n      },\n      recordClick: function(args) {\n        const $tb = $('#grid_toolbarItems');\n        let li;\n        const recs = this.getSelectedRecords();\n        const action = (recs.length === 0) ? 'disableItem' : 'enableItem';\n        li = $('#grid_delete');\n        $tb.ejToolbar(action, li);\n        li = $('#grid_Edit');\n        $tb.ejToolbar(action, li);\n        li = $('#grid_ModerateAd');\n        $tb.ejToolbar(action, li);\n        li = $('#grid_UnModerateAd');\n        $tb.ejToolbar(action, li);\n        li = $('#grid_TrashPlace');\n        $tb.ejToolbar(action, li);\n        li = $('#grid_UnTrashPlace');\n        $tb.ejToolbar(action, li);\n      },\n      columns: [\n        {field: 'aid', headerText: localeStrings.adId, isPrimaryKey: true, textAlign: ej.TextAlign.Right, allowSorting: true, allowEditing: false, width: 100},\n        {field: 'title', headerText: localeStrings.name, allowSorting: true, allowEditing: false, width: 250},\n        {field: 'description', headerText: localeStrings.desc, allowSorting: true, allowEditing: false},\n        {field: 'asize', headerText: localeStrings.size, allowSorting: true, allowEditing: false, width: 100},\n        {field: 'stat', headerText: localeStrings.status, textAlign: ej.TextAlign.Center, allowSorting: false, allowEditing: false, allowFiltering: false, width: 100},\n        {field: 'trash', headerText: 'Status', allowEditing: false, visible: false}\n      ]\n    }).data('ejGrid');\n\n    const ddList = $('#view-mode').ejDropDownList({\n      selectedItemIndex: 0,\n      change: function (args) {\n        const sel = parseInt(this.getSelectedValue(), 10);\n        if (sel !== 10) {\n          $('#grid').ejGrid('model.query', new ej.Query().where('trash', ej.FilterOperators.equal, sel, 10));\n        }\n        else {\n          $('#grid').ejGrid('model.query', new ej.Query());\n        }\n        if (sel === 0) grid._disabledToolItems.push(lis[8]);\n        else if (sel === 1) grid._disabledToolItems.push(lis[7]);\n        grid.refreshContent(true);\n      }\n    }).data('ejDropDownList');\n  });\n})(jQuery);\n"]}