'use strict';(function(a){var b=options.locale.changeLocale?options.locale.locale:'en-US',c=options.strings,d=options.periods[options.period].start,e=options.periods[options.period].end,f=20>options.period?'days':'months',g=20>options.period?'ru-RU'===b?'d MMM':'MMM dd':'MMM, yyyy',h='all'===options.view?'':'all'===options.owner?c.advertisers:c.advertiser+': '+options.owner,i=ajaxurl+('sold'===options.view?'?action=load_chart_data':'?action=load_chart_data_all')+'&sam_pro_nonce='+options.samProNonce,j=ajaxurl+('sold'===options.view?'?action=load_grid_data':'?action=load_grid_data_all')+'&sam_pro_nonce='+options.samProNonce,k=ajaxurl+('sold'===options.view?'?action=load_grid_child_data&start='+d+'&end='+e+'&owner='+options.owner+'&period='+options.period:'?action=load_grid_child_data_all&start='+d+'&end='+e+'&owner='+options.owner+'&period='+options.period)+'&sam_pro_nonce='+options.samProNonce,l=ajaxurl+('sold'===options.view?'?action=load_pie_data':'?action=load_pie_data_all')+'&sam_pro_nonce='+options.samProNonce,m=ajaxurl+('sold'===options.view?'?action=load_pie_data_2':'?action=load_pie_data_2_all')+'&sam_pro_nonce='+options.samProNonce,n='&item='+options.item+'&start='+d+'&end='+e+'&period='+options.period+'&owner='+options.owner;a(document).ready(function(){function o(h,i){var j=ajaxurl+'?action=load_ad_chart_data&sam_pro_nonce='+options.samProNonce,k='&aid='+h+'&pid='+i+'&start='+d+'&end='+e+'&period='+options.period,l=ej.DataManager({url:j+k,requestType:'json',adaptor:new ej.UrlAdaptor}),m=new ej.Query,n=l.executeQuery(m);return n.done(function(d){var e=a('#ad-chart').ejChart({locale:b,enableCanvasRendering:!0,canResize:!0,isResponsive:!0,theme:ej.datavisualization.Chart.Theme.FlatLight,title:{text:options.periods[options.period].title,font:{fontFamily:'"Open Sans",sans-serif',fontWeight:'bold'}},primaryXAxis:{valueType:'datetime',intervalType:f,labelFormat:g},commonSeriesOptions:{tooltip:{visible:!0,format:'#series.name#: #point.y#'}},series:[{name:c.impressions,type:'column',dataSource:l,xName:'mdate',yName:'hits',query:d.query,marker:{dataLabel:{visible:!0,textPosition:'top',fill:'#FF7777',verticalTextAlignment:'top',offset:20,shape:'rectangle',font:{color:'white'}}}},{name:c.clicks,type:'column',dataSource:l,xName:'mdate',yName:'clicks',query:d.query,marker:{dataLabel:{visible:!0,textPosition:'top',fill:'#ffd45a',verticalTextAlignment:'top',offset:20,shape:'rectangle',font:{color:'white'}}}}]}).data('ejChart');e.redraw()}),!1}var p=a('#chart-dialog').ejDialog({width:950,allowDraggable:!0,enableModal:!0,showOnInit:!1}).data('ejDialog');a('#close-chart').on('click',function(a){a.preventDefault(),p.close()});var q=ej.DataManager({url:i,requestType:'json',adaptor:new ej.UrlAdaptor}),r=new ej.Query().addParams('item',options.item).addParams('start',d).addParams('end',e).addParams('owner',options.owner).addParams('period',options.period),s=a('#chart').ejChart({locale:b,enableCanvasRendering:!0,canResize:!0,isResponsive:!0,theme:ej.datavisualization.Chart.Theme.FlatLight,title:{text:options.periods[options.period].title,font:{fontFamily:'"Open Sans",sans-serif',fontWeight:'bold'},subTitle:{text:h,font:{size:'14px',fontFamily:'"Open Sans",sans-serif',fontWeight:'bold'}}},primaryXAxis:{valueType:'datetime',intervalType:f,labelFormat:g},commonSeriesOptions:{tooltip:{visible:!0,format:'#series.name#: #point.y#'}},series:[{name:c.impressions,type:'column',dataSource:q,xName:'mdate',yName:'hits',query:r,enableSmartLabels:!0,marker:{dataLabel:{visible:!0,textPosition:'top',fill:'#FF7777',verticalTextAlignment:'top',offset:10,shape:'rectangle',font:{color:'white'}}}},{name:c.clicks,type:'column',dataSource:q,xName:'mdate',yName:'clicks',query:r,marker:{dataLabel:{visible:!0,textPosition:'top',fill:'#ffd45a',verticalTextAlignment:'top',offset:20,shape:'rectangle',font:{color:'white'}}}}]}),t=ej.DataManager({url:j,requestType:'json',adaptor:new ej.UrlAdaptor}),u=ej.DataManager({url:k,requestType:'json',adaptor:new ej.UrlAdaptor}),v='sold'===options.view?[{field:'pid',headerText:c.adId,isPrimaryKey:!0,textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:c.name},{field:'hits',headerText:c.impressions,textAlign:ej.TextAlign.Right,width:100},{field:'clicks',headerText:c.clicks,textAlign:ej.TextAlign.Right,width:80},{field:'income',headerText:c.income,textAlign:ej.TextAlign.Right,width:100},{field:'cpm',headerText:'CPM',textAlign:ej.TextAlign.Right,width:100},{field:'cpc',headerText:'CPC',textAlign:ej.TextAlign.Right,width:100},{field:'ctr',headerText:'CTR',textAlign:ej.TextAlign.Right,width:100}]:[{field:'pid',headerText:c.adId,isPrimaryKey:!0,textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:c.name},{field:'hits',headerText:c.impressions,textAlign:ej.TextAlign.Right,width:100},{field:'clicks',headerText:c.clicks,textAlign:ej.TextAlign.Right,width:80},{field:'sold',headerText:c.status,textAlign:ej.TextAlign.Center,width:100}],w='sold'===options.view?[{field:'pid',headerText:'Place ID',isPrimaryKey:!0,visible:!1},{field:'aid',headerText:c.adId,textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:c.name},{field:'hits',headerText:c.impressions,textAlign:ej.TextAlign.Right,width:100},{field:'clicks',headerText:c.clicks,textAlign:ej.TextAlign.Right,width:80},{field:'income',headerText:c.income,textAlign:ej.TextAlign.Right,width:100},{field:'cpm',headerText:'CPM',textAlign:ej.TextAlign.Right,width:100},{field:'cpc',headerText:'CPC',textAlign:ej.TextAlign.Right,width:100},{field:'ctr',headerText:'CTR',textAlign:ej.TextAlign.Right,width:100}]:[{field:'pid',headerText:'Place ID',isPrimaryKey:!0,visible:!1},{field:'aid',headerText:c.adId,textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:c.name},{field:'hits',headerText:c.impressions,textAlign:ej.TextAlign.Right,width:100},{field:'clicks',headerText:c.clicks,textAlign:ej.TextAlign.Right,width:80}],x=a('#grid').ejGrid({dataSource:t,query:new ej.Query().addParams('item',options.item).addParams('start',d).addParams('end',e).addParams('owner',options.owner).addParams('period',options.period),locale:b,allowTextWrap:!0,allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},allowSelection:!0,selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},columns:v,childGrid:{dataSource:u,queryString:'pid',locale:b,allowTextWrap:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},toolbarSettings:{showToolbar:!0,customToolbarItems:['Ad_Chart']},columns:w,actionComplete:function actionComplete(b){if('refresh'===b.requestType){var c=a('#'+this._id+'_toolbarItems'),d=a('#'+this._id+'_Ad_Chart');c.ejToolbar('disableItem',d)}},toolbarClick:function toolbarClick(b){var c=a(b.target),d=this.getSelectedRecords(),e=d[0].pid,f=d[0].aid;if(c.hasClass('Ad_Chart')){o(f,e);p.open()}},recordClick:function recordClick(){var b=a('#'+this._id+'_toolbarItems'),c=a('#'+this._id+'_Ad_Chart'),d=this.getSelectedRecords(),e=0===d.length?'disableItem':'enableItem';b.ejToolbar(e,c)},create:function create(){a('.Ad_Chart').parent('li').attr('title',c.statistics)}}}).data('ejGrid'),y=ej.DataManager({url:l+n,requestType:'json',adaptor:new ej.UrlAdaptor}),z=ej.DataManager({url:m+n,requestType:'json',adaptor:new ej.UrlAdaptor}),A=a('#pieChartHits').ejChart({title:{text:c.impressions,font:{fontFamily:'"Open Sans",sans-serif',fontWeight:'bold',size:'20px'}},series:[{dataSource:y,query:new ej.Query,xName:'title',yName:'hits',type:'doughnut',tooltip:{format:'#point.x# : #point.y#',visible:!0},labelPosition:'outside',doughnutCoefficient:0.4,marker:{dataLabel:{visible:!0,connectorLine:{height:20},font:{size:'13px'}}}}],isResponsive:!0,legend:{visible:!0}}),B=a('#pieChartClicks').ejChart({title:{text:c.clicks,font:{fontFamily:'"Open Sans",sans-serif',fontWeight:'bold',size:'20px'}},series:[{dataSource:z,query:new ej.Query,tooltip:{format:'#point.x# : #point.y#',visible:!0},xName:'title',yName:'clicks',type:'doughnut',marker:{dataLabel:{visible:!0,connectorLine:{height:20},font:{size:'13px'}}},labelPosition:'outside'}],isResponsive:!0,legend:{visible:!0}})})})(jQuery);

//# sourceMappingURL=sam.pro.statistics.min.js.map