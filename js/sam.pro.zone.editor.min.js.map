{"version":3,"sources":["../js-src/sam.pro.zone.editor.js"],"names":[],"mappings":"aAGA,GAAM,WAAY,QAAQ,KAAR,CAAc,KAAhC,CACM,YAAc,QAAQ,KAAR,CAAc,MADlC,CAEM,KAAO,QAAQ,IAFrB,CAGM,OAAS,QAAQ,MAHvB,CAIM,SAAW,QAAQ,YAJzB,CAMA,CAAC,WAAY,CACX,GAAM,GAAY,QAAQ,MAAR,CAAe,YAAhB,CAAgC,QAAQ,MAAR,CAAe,MAA/C,CAAwD,OAAzE,CACM,EAAgB,QAAQ,OAD9B,CAEA,EAAE,QAAF,EAAY,KAAZ,CAAkB,UAAW,CAC3B,GAEI,EAFJ,CAGI,CAHJ,CAIM,EAAc,EAAE,cAAF,EAAkB,QAAlB,CAA2B,CAC7C,MAAO,GADsC,CAE7C,iBAF6C,CAG7C,cAH6C,CAI7C,aAJ6C,CAA3B,EAKjB,IALiB,CAKZ,UALY,CAJpB,CAUM,EAAe,EAAE,eAAF,EAAmB,QAAnB,CAA4B,CAC/C,MAAO,GADwC,CAE/C,iBAF+C,CAG/C,cAH+C,CAI/C,aAJ+C,CAA5B,EAKlB,IALkB,CAKb,UALa,CAVrB,CAgBM,EAAW,GAAI,UAhBrB,CAiBM,EAAY,GAAI,UAjBtB,CAmBA,EAAS,GAAT,CAAe,EApBY,CAoBR,EAAU,GAAV,CAAgB,EApBR,CAqB3B,EAAY,EAAE,YAAF,EAAgB,MAAhB,CAAuB,CACjC,WAAY,SADqB,CAEjC,QAFiC,CAGjC,eAHiC,CAIjC,iBAJiC,CAKjC,cAAe,GAAG,IAAH,CAAQ,aAAR,CAAsB,QALJ,CAMjC,kBAAmB,CACjB,cAAe,CAAC,GAAG,IAAH,CAAQ,aAAR,CAAsB,GAAvB,CADE,CAEjB,eAFiB,CANc,CAUjC,cAViC,CAWjC,aAAc,CACZ,SAAU,QADE,CAXmB,CAcjC,QAAS,CACP,CAAC,MAAO,MAAR,CAAgB,UAAhB,CADO,CAEP,CAAC,MAAO,KAAR,CAAe,WAAY,EAAc,IAAzC,CAFO,CAGP,CAAC,MAAO,MAAR,CAAgB,WAAY,EAAc,IAA1C,CAHO,CAIP,CAAC,MAAO,WAAR,CAAqB,UAArB,CAJO,CAKP,CAAC,MAAO,UAAR,CAAoB,UAApB,CALO,CAdwB,CAqBjC,YAAa,uBAAe,CAC1B,GAAG,CAAC,EAAS,OAAb,CAAsB,CACpB,EAAS,IAAT,CAAgB,EAAK,KAAL,CAAW,YAAX,CAAwB,WADpB,CAEpB,GAAM,GAAI,EAAS,IAAT,CAAc,EAAS,IAAvB,EAA6B,KAA7B,CAAmC,CAAnC,CAAV,CACM,EAAK,EAAE,OAAF,CAAU,EAAK,IAAL,CAAU,IAApB,CADX,CAEQ,CAAC,CAAN,EAJiB,CAIR,EAAS,SAAT,CAAmB,EAAK,IAAL,CAAU,IAA7B,CAJQ,CAKf,EAAS,IAAT,CAAgB,EAAK,IAAL,CAAU,IAChC,CACF,CA7BgC,CA8BjC,eAAgB,0BAAe,CAC7B,GAAM,GAAI,EAAS,GAAT,CAAa,KAAb,CAAmB,CAAnB,CAAV,CAEA,GADA,EAAS,OAAT,GACA,CAAgB,CAAb,KAAE,MAAL,CACE,IAAI,GAAI,GAAI,CAAZ,CAAe,EAAI,KAAK,KAAL,CAAW,eAAX,CAA2B,MAA9C,CAAsD,GAAtD,CACE,IAAI,GAAI,GAAI,CAAZ,CAAe,EAAI,EAAE,MAArB,CAA6B,GAA7B,CACK,OAAS,KAAK,KAAL,CAAW,eAAX,IAA8B,IAD5C,GAEI,KAAK,sBAAL,GAFJ,CAGI,KAAK,UAAL,GAHJ,CAI4B,QAArB,KAAK,WAJZ,EAKM,EAAS,IAAT,CAAgB,EAAK,WAL3B,CAMM,EAAS,IAAT,CAAgB,KAAK,KAAL,CAAW,eAAX,IAA8B,IANpD,EAQiC,SAArB,KAAK,WARjB,GASM,EAAS,IAAT,CAAgB,CATtB,CAUM,EAAS,IAAT,CAAgB,KAAK,KAAL,CAAW,eAAX,IAA8B,IAVpD,GAgBJ,EAAS,OAAT,GACD,CApDgC,CAAvB,EAqDT,IArDS,CAqDJ,QArDI,CArBe,CA4E3B,EAAa,EAAE,aAAF,EAAiB,MAAjB,CAAwB,CACnC,WAAY,WADuB,CAEnC,QAFmC,CAGnC,eAHmC,CAInC,iBAJmC,CAKnC,cAAe,GAAG,IAAH,CAAQ,aAAR,CAAsB,QALF,CAMnC,kBAAmB,CACjB,cAAe,CAAC,GAAG,IAAH,CAAQ,aAAR,CAAsB,GAAvB,CADE,CAEjB,eAFiB,CANgB,CAUnC,cAVmC,CAWnC,aAAc,CACZ,SAAU,QADE,CAXqB,CAcnC,QAAS,CACP,CAAC,MAAO,MAAR,CAAgB,UAAhB,CADO,CAEP,CAAC,MAAO,KAAR,CAAe,WAAY,EAAc,IAAzC,CAFO,CAGP,CAAC,MAAO,MAAR,CAAgB,WAAY,EAAc,IAA1C,CAHO,CAIP,CAAC,MAAO,WAAR,CAAqB,UAArB,CAJO,CAKP,CAAC,MAAO,UAAR,CAAoB,UAApB,CALO,CAd0B,CAqBnC,YAAa,uBAAe,CAC1B,GAAG,CAAC,EAAU,OAAd,CAAuB,CACrB,EAAU,IAAV,CAAiB,EAAK,KAAL,CAAW,YAAX,CAAwB,WADpB,CAErB,GAAM,GAAI,EAAU,IAAV,CAAe,EAAU,IAAzB,EAA+B,KAA/B,CAAqC,CAArC,CAAV,CACM,EAAK,EAAE,OAAF,CAAU,EAAK,IAAL,CAAU,IAApB,CADX,CAEQ,CAAC,CAAN,EAJkB,CAIT,EAAU,SAAV,CAAoB,EAAK,IAAL,CAAU,IAA9B,CAJS,CAKhB,EAAU,IAAV,CAAiB,EAAK,IAAL,CAAU,IACjC,CACF,CA7BkC,CA8BnC,eAAgB,0BAAe,CAC7B,GAAM,GAAI,EAAU,GAAV,CAAc,KAAd,CAAoB,CAApB,CAAV,CAEA,GADA,EAAU,OAAV,GACA,CAAgB,CAAb,KAAE,MAAL,CACE,IAAI,GAAI,GAAI,CAAZ,CAAe,EAAI,KAAK,KAAL,CAAW,eAAX,CAA2B,MAA9C,CAAsD,GAAtD,CACE,IAAI,GAAI,GAAI,CAAZ,CAAe,EAAI,EAAE,MAArB,CAA6B,GAA7B,CACK,OAAS,KAAK,KAAL,CAAW,eAAX,IAA8B,IAD5C,GAEI,KAAK,sBAAL,GAFJ,CAGI,KAAK,UAAL,GAHJ,CAI4B,QAArB,KAAK,WAJZ,EAKM,EAAU,IAAV,CAAiB,EAAK,WAL5B,CAMM,EAAU,IAAV,CAAiB,KAAK,KAAL,CAAW,eAAX,IAA8B,IANrD,EAQiC,SAArB,KAAK,WARjB,GASM,EAAU,IAAV,CAAiB,CATvB,CAUM,EAAU,IAAV,CAAiB,KAAK,KAAL,CAAW,eAAX,IAA8B,IAVrD,GAgBJ,EAAU,OAAV,GACD,CApDkC,CAAxB,EAqDV,IArDU,CAqDL,QArDK,CA5Ec,CAmI3B,EAAE,eAAF,EAAmB,EAAnB,CAAsB,OAAtB,CAA+B,iBAAO,GAAY,KAAZ,EAAP,CAA/B,CAnI2B,CAqI3B,EAAE,eAAF,EAAmB,EAAnB,CAAsB,OAAtB,CAA+B,WAAO,CACpC,EAAE,cAAF,EADoC,CAGpC,GAAM,GAAQ,EAAS,GAAvB,CACM,EAAS,EAAM,KAAN,CAAY,GAAZ,CADf,CAEM,IAFN,CAGA,EAAO,OAAP,CAAe,WAAU,CACvB,GAAM,GAAQ,UAAU,IAAV,CAAe,kBAAS,GAAG,IAAH,IAAT,CAAf,CAAd,CADuB,GAEZ,EAAK,IAAL,GACZ,CAHD,CANoC,CAUnB,CAAd,GAAK,MAV4B,EAWlC,EAAE,IAAF,CAAO,OAAP,CAAgB,CACd,OAAQ,gBADM,CAEd,IAAK,IAFS,CAGd,OAHc,CAId,cAAe,QAAQ,WAJT,CAAhB,EAKG,IALH,CAKQ,UAAM,CACZ,EAAY,cAAZ,EACD,CAPD,CAXkC,CAqBpC,EAAY,KAAZ,EACD,CAtBD,CArI2B,CA6J3B,EAAE,gBAAF,EAAoB,EAApB,CAAuB,OAAvB,CAAgC,iBAAO,GAAa,KAAb,EAAP,CAAhC,CA7J2B,CA+J3B,EAAE,gBAAF,EAAoB,EAApB,CAAuB,OAAvB,CAAgC,WAAO,CACrC,EAAE,cAAF,EADqC,CAGrC,GAAM,GAAQ,EAAU,GAAxB,CACM,EAAS,EAAM,KAAN,CAAY,GAAZ,CADf,CAEM,IAFN,CAGA,EAAO,OAAP,CAAe,WAAU,CACvB,GAAM,GAAQ,YAAY,IAAZ,CAAiB,kBAAS,GAAG,IAAH,IAAT,CAAjB,CAAd,CADuB,GAEZ,EAAK,IAAL,GACZ,CAHD,CANqC,CAUpB,CAAd,GAAK,MAV6B,EAWnC,EAAE,IAAF,CAAO,OAAP,CAAgB,CACd,OAAQ,uBADM,CAEd,IAAK,IAFS,CAGd,OAHc,CAId,cAAe,QAAQ,WAJT,CAAhB,EAKG,IALH,CAKQ,iBAAO,GAAW,cAAX,EAAP,CALR,CAXmC,CAmBrC,EAAa,KAAb,EACD,CApBD,CA/J2B,CAqL3B,GAAM,GAAY,GAAG,WAAH,CAAe,CAC/B,IAAK,QAAU,+BAAV,CAA4C,IAA5C,CAAmD,iBAAnD,CAAuE,QAAQ,WADrD,CAE/B,UAAW,QAAU,gCAAV,CAA6C,IAA7C,CAAoD,iBAApD,CAAwE,QAAQ,WAF5D,CAG/B,UAAW,QAAU,gCAAV,CAA6C,IAA7C,CAAoD,iBAApD,CAAwE,QAAQ,WAH5D,CAI/B,YAAa,MAJkB,CAK/B,QAAS,GAAI,IAAG,UALe,CAAf,CAAlB,CAOM,EAAW,GAAG,WAAH,CAAe,CAC9B,IAAK,QAAU,sCAAV,CAAmD,IAAnD,CAA0D,iBAA1D,CAA8E,QAAQ,WAD7D,CAE9B,UAAW,QAAU,uCAAV,CAAoD,IAApD,CAA2D,iBAA3D,CAA+E,QAAQ,WAFpE,CAG9B,UAAW,QAAU,uCAAV,CAAoD,IAApD,CAA2D,iBAA3D,CAA+E,QAAQ,WAHpE,CAI9B,YAAa,MAJiB,CAK9B,QAAS,GAAI,IAAG,UALc,CAAf,CAPjB,CAeM,EAAc,EAAE,QAAF,EAAY,MAAZ,CAAmB,CACrC,YADqC,CAErC,QAFqC,CAGrC,eAHqC,CAIrC,iBAJqC,CAKrC,cAAe,GAAG,IAAH,CAAQ,aAAR,CAAsB,MALA,CAMrC,kBAAmB,CACjB,cAAe,CAAC,GAAG,IAAH,CAAQ,aAAR,CAAsB,GAAvB,CADE,CAEjB,eAFiB,CANkB,CAUrC,cAVqC,CAWrC,aAAc,CACZ,SAAU,QADE,CAXuB,CAcrC,aAAc,CAAC,eAAD,CAAqB,gBAArB,CAA0C,0BAA1C,CAduB,CAerC,gBAAiB,CACf,cADe,CAEf,aAAc,CACZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,IADT,CAEZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,MAFT,CAGZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,MAHT,CAIZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,MAJT,CAFC,CAQf,oCARe,CAfoB,CA4BrC,aAAc,wBAAgB,CAC5B,GAAM,GAAU,EAAE,EAAK,MAAP,CAAhB,CACI,EAAQ,QAAR,CAAiB,SAAjB,CAFwB,CAG1B,KAAK,cAAL,EAH0B,CAKnB,EAAQ,QAAR,CAAiB,KAAjB,CALmB,EAM1B,EAAY,IAAZ,EAEH,CApCoC,CAqCrC,OAAQ,iBAAgB,CACtB,EAAE,UAAF,EAAc,MAAd,CAAqB,IAArB,EAA2B,IAA3B,CAAgC,OAAhC,CAAyC,EAAc,OAAvD,CADsB,CAEtB,EAAE,MAAF,EAAU,MAAV,CAAiB,IAAjB,EAAuB,IAAvB,CAA4B,OAA5B,CAAqC,EAAc,GAAnD,CACD,CAxCoC,CAyCrC,eAAgB,yBAAgB,CAC9B,GACI,EADJ,CAAM,EAAM,EAAE,qBAAF,CAAZ,CAEA,EAAK,EAAE,eAAF,CAHyB,CAI9B,EAAI,SAAJ,CAAc,aAAd,GACD,CA9CoC,CA+CrC,YAAa,sBAAgB,CAC3B,GACI,EADJ,CAAM,EAAM,EAAE,qBAAF,CAAZ,CAEM,EAAO,KAAK,kBAAL,EAFb,CAGM,EAA0B,CAAhB,KAAK,MAAN,CAAsB,aAAtB,CAAsC,YAHrD,CAIA,EAAK,EAAE,eAAF,CALsB,CAM3B,EAAI,SAAJ,KACD,CAtDoC,CAuDrC,QAAS,CACP,CAAC,MAAO,KAAR,CAAe,eAAf,CAAoC,UAApC,CADO,CAEP,CAAC,MAAO,MAAR,CAAgB,WAAY,EAAc,IAA1C,CAAgD,eAAhD,CAAoE,eAApE,CAAyF,UAAzF,CAFO,CAGP,CAAC,MAAO,QAAR,CAAkB,eAAlB,CAAuC,UAAvC,CAHO,CAIP,CACE,MAAO,UADT,CAEE,WAAY,EAAc,QAF5B,CAGE,eAHF,CAIE,UAJF,CAKE,MAAO,GALT,CAJO,CAWP,CAAC,MAAO,KAAR,CAAe,WAAY,EAAc,IAAzC,CAA+C,eAA/C,CAXO,CAYP,CAAC,MAAO,MAAR,CAAgB,WAAY,EAAc,IAA1C,CAAgD,eAAhD,CAZO,CAaP,CAAC,MAAO,WAAR,CAAqB,eAArB,CAA0C,UAA1C,CAbO,CAcP,CACE,MAAO,KADT,CAEE,gBAAiB,KAFnB,CAGE,gBAAiB,OAHnB,CAIE,WAAY,MAJd,CAKE,WAAY,EAAc,KAL5B,CAME,UANF,CAdO,CAvD4B,CAAnB,EA8EjB,IA9EiB,CA8EZ,QA9EY,CAfpB,CA+FM,EAAa,EAAE,QAAF,EAAY,MAAZ,CAAmB,CACpC,YADoC,CAEpC,QAFoC,CAGpC,eAHoC,CAIpC,iBAJoC,CAKpC,cAAe,GAAG,IAAH,CAAQ,aAAR,CAAsB,MALD,CAMpC,kBAAmB,CACjB,cAAe,CAAC,GAAG,IAAH,CAAQ,aAAR,CAAsB,GAAvB,CADE,CAEjB,eAFiB,CANiB,CAUpC,cAVoC,CAWpC,aAAc,CACZ,SAAU,QADE,CAXsB,CAcpC,aAAc,CAAC,eAAD,CAAqB,gBAArB,CAA0C,0BAA1C,CAdsB,CAepC,gBAAiB,CACf,cADe,CAEf,aAAc,CACZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,IADT,CAEZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,MAFT,CAGZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,MAHT,CAIZ,GAAG,IAAH,CAAQ,YAAR,CAAqB,MAJT,CAFC,CAQf,oCARe,CAfmB,CA4BpC,aAAc,wBAAgB,CAC5B,GAAM,GAAU,EAAE,EAAK,MAAP,CAAhB,CACI,EAAQ,QAAR,CAAiB,SAAjB,CAFwB,CAG1B,KAAK,cAAL,EAH0B,CAKnB,EAAQ,QAAR,CAAiB,KAAjB,CALmB,EAM1B,EAAa,IAAb,EAEH,CApCmC,CAqCpC,OAAQ,iBAAgB,CACtB,EAAE,UAAF,EAAc,MAAd,CAAqB,IAArB,EAA2B,IAA3B,CAAgC,OAAhC,CAAyC,EAAc,OAAvD,CADsB,CAEtB,EAAE,MAAF,EAAU,MAAV,CAAiB,IAAjB,EAAuB,IAAvB,CAA4B,OAA5B,CAAqC,EAAc,GAAnD,CACD,CAxCmC,CAyCpC,eAAgB,yBAAgB,CAC9B,GACI,EADJ,CAAM,EAAM,EAAE,qBAAF,CAAZ,CAEA,EAAK,EAAE,eAAF,CAHyB,CAI9B,EAAI,SAAJ,CAAc,aAAd,GACD,CA9CmC,CA+CpC,YAAa,sBAAgB,CAC3B,GACI,EADJ,CAAM,EAAM,EAAE,qBAAF,CAAZ,CAEM,EAAO,KAAK,kBAAL,EAFb,CAGM,EAA0B,CAAhB,KAAK,MAAN,CAAsB,aAAtB,CAAsC,YAHrD,CAIA,EAAK,EAAE,eAAF,CALsB,CAM3B,EAAI,SAAJ,KACD,CAtDmC,CAuDpC,QAAS,CACP,CAAC,MAAO,KAAR,CAAe,eAAf,CAAoC,UAApC,CADO,CAEP,CAAC,MAAO,MAAR,CAAgB,WAAY,EAAc,IAA1C,CAAgD,eAAhD,CAAoE,eAApE,CAAyF,UAAzF,CAFO,CAGP,CAAC,MAAO,QAAR,CAAkB,eAAlB,CAAuC,UAAvC,CAHO,CAIP,CACE,MAAO,UADT,CAEE,WAAY,EAAc,QAF5B,CAGE,UAAW,GAAG,SAAH,CAAa,KAH1B,CAIE,SAAU,GAAG,IAAH,CAAQ,WAAR,CAAoB,OAJhC,CAKE,MAAO,GALT,CAJO,CAWP,CAAC,MAAO,KAAR,CAAe,WAAY,EAAc,IAAzC,CAA+C,eAA/C,CAXO,CAYP,CAAC,MAAO,MAAR,CAAgB,WAAY,EAAc,IAA1C,CAAgD,eAAhD,CAZO,CAaP,CAAC,MAAO,WAAR,CAAqB,eAArB,CAA0C,UAA1C,CAbO,CAcP,CACE,MAAO,KADT,CAEE,gBAAiB,KAFnB,CAGE,gBAAiB,OAHnB,CAIE,WAAY,MAJd,CAKE,WAAY,EAAc,KAL5B,CAME,UANF,CAdO,CAvD2B,CAAnB,EA8EhB,IA9EgB,CA8EX,QA9EW,CA+EpB,CAnWD,CAoWD,CAvWD,EAuWG,MAvWH,C","file":"sam.pro.zone.editor.min.js","sourcesContent":["/**\n * Created by minimus on 26.06.2015.\n */\nconst zoneRules = options.rules.rules;\nconst singleRules = options.rules.single;\nconst item = options.item;\nconst places = options.places;\nconst pageSize = options.itemsPerPage;\n\n(function($) {\n  const ejLocale = (options.locale.changeLocale) ? options.locale.locale : 'en-US';\n  const localeStrings = options.strings;\n  $(document).ready(function() {\n    let dmRules;\n    let dmSRules;\n    let rulesGrid;\n    let sRulesGrid;\n    const rulesDialog = $('#rulesDialog').ejDialog({\n      width: 830,\n      allowDraggable: true,\n      enableModal: true,\n      showOnInit: false\n    }).data('ejDialog');\n    const singleDialog = $('#singleDialog').ejDialog({\n      width: 830,\n      allowDraggable: true,\n      enableModal: true,\n      showOnInit: false\n    }).data('ejDialog');\n    const rulesSel = new Selectors();\n    const singleSel = new Selectors();\n\n    rulesSel.sid = ''; singleSel.sid = '';\n    rulesGrid = $('#rulesGrid').ejGrid({\n      dataSource: zoneRules,\n      locale: ejLocale,\n      allowSorting: true,\n      allowSelection: true,\n      selectionType: ej.Grid.SelectionType.Multiple,\n      selectionSettings: {\n        selectionMode: [ej.Grid.SelectionMode.Row],\n        enableToggle: true\n      },\n      allowPaging: true,\n      pageSettings: {\n        pageSize: pageSize\n      },\n      columns: [\n        {field: 'slug', visible: false},\n        {field: 'tax', headerText: localeStrings.type},\n        {field: 'name', headerText: localeStrings.name},\n        {field: 'term_slug', visible: false},\n        {field: 'priority', visible: false}\n      ],\n      rowSelected: function(args) {\n        if(!rulesSel.service) {\n          rulesSel.page = args.model.pageSettings.currentPage;\n          const d = rulesSel.pids[rulesSel.page].slice(0);\n          const cr = d.indexOf(args.data.slug);\n          if(cr > -1) rulesSel.removePid(args.data.slug);\n          else rulesSel.pids = args.data.slug;\n        }\n      },\n      actionComplete: function(args) {\n        const d = rulesSel.ids.slice(0);\n        rulesSel.service = true;\n        if(d.length !== 0) {\n          for(let i = 0; i < this.model.currentViewData.length; i++) {\n            for(let j = 0; j < d.length; j++) {\n              if(d[j] === this.model.currentViewData[i].slug) {\n                this.multiSelectCtrlRequest = true;\n                this.selectRows(i);\n                if(args.requestType === 'paging') {\n                  rulesSel.page = args.currentPage;\n                  rulesSel.pids = this.model.currentViewData[i].slug;\n                }\n                else if(args.requestType === 'refresh') {\n                  rulesSel.page = 1;\n                  rulesSel.pids = this.model.currentViewData[i].slug;\n                }\n              }\n            }\n          }\n        }\n        rulesSel.service = false;\n      }\n    }).data('ejGrid');\n\n    sRulesGrid = $('#singleGrid').ejGrid({\n      dataSource: singleRules,\n      locale: ejLocale,\n      allowSorting: true,\n      allowSelection: true,\n      selectionType: ej.Grid.SelectionType.Multiple,\n      selectionSettings: {\n        selectionMode: [ej.Grid.SelectionMode.Row],\n        enableToggle: true\n      },\n      allowPaging: true,\n      pageSettings: {\n        pageSize: pageSize\n      },\n      columns: [\n        {field: 'slug', visible: false},\n        {field: 'tax', headerText: localeStrings.type},\n        {field: 'name', headerText: localeStrings.name},\n        {field: 'term_slug', visible: false},\n        {field: 'priority', visible: false}\n      ],\n      rowSelected: function(args) {\n        if(!singleSel.service) {\n          singleSel.page = args.model.pageSettings.currentPage;\n          const d = singleSel.pids[singleSel.page].slice(0);\n          const cr = d.indexOf(args.data.slug);\n          if(cr > -1) singleSel.removePid(args.data.slug);\n          else singleSel.pids = args.data.slug;\n        }\n      },\n      actionComplete: function(args) {\n        const d = singleSel.ids.slice(0);\n        singleSel.service = true;\n        if(d.length !== 0) {\n          for(let i = 0; i < this.model.currentViewData.length; i++) {\n            for(let j = 0; j < d.length; j++) {\n              if(d[j] === this.model.currentViewData[i].slug) {\n                this.multiSelectCtrlRequest = true;\n                this.selectRows(i);\n                if(args.requestType === 'paging') {\n                  singleSel.page = args.currentPage;\n                  singleSel.pids = this.model.currentViewData[i].slug;\n                }\n                else if(args.requestType === 'refresh') {\n                  singleSel.page = 1;\n                  singleSel.pids = this.model.currentViewData[i].slug;\n                }\n              }\n            }\n          }\n        }\n        singleSel.service = false;\n      }\n    }).data('ejGrid');\n\n    $('#cancel-rules').on('click', () => (rulesDialog.close()));\n\n    $('#select-rules').on('click', (e) => {\n      e.preventDefault();\n\n      const rules = rulesSel.sid;\n      const aRules = rules.split(',');\n      const data = [];\n      aRules.forEach((elem) => {\n        const found = zoneRules.find((el) => (el.slug === elem));\n        if (found) data.push(found);\n      });\n      if(data.length > 0) {\n        $.post(ajaxurl, {\n          action: 'add_zone_rules',\n          zid: item,\n          rules: data,\n          sam_pro_nonce: options.samProNonce\n        }).done(() => {\n          generalGrid.refreshContent();\n        });\n      }\n\n      rulesDialog.close();\n    });\n\n    $('#cancel-single').on('click', () => (singleDialog.close()));\n\n    $('#select-single').on('click', (e) => {\n      e.preventDefault();\n\n      const rules = singleSel.sid;\n      const aRules = rules.split(',');\n      const data = [];\n      aRules.forEach((elem) => {\n        const found = singleRules.find((el) => (el.slug === elem));\n        if (found) data.push(found);\n      });\n      if(data.length > 0) {\n        $.post(ajaxurl, {\n          action: 'add_zone_single_rules',\n          zid: item,\n          rules: data,\n          sam_pro_nonce: options.samProNonce\n        }).done(() => (singleGrid.refreshContent()));\n      }\n\n      singleDialog.close();\n    });\n\n    const dmGeneral = ej.DataManager({\n      url: ajaxurl + '?action=load_zone_rules&item=' + item + '&sam_pro_nonce=' + options.samProNonce,\n      updateUrl: ajaxurl + '?action=update_zone_rule&item=' + item + '&sam_pro_nonce=' + options.samProNonce,\n      removeUrl: ajaxurl + '?action=remove_zone_rule&item=' + item + '&sam_pro_nonce=' + options.samProNonce,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n    const dmSingle = ej.DataManager({\n      url: ajaxurl + '?action=load_zone_single_rules&item=' + item + '&sam_pro_nonce=' + options.samProNonce,\n      updateUrl: ajaxurl + '?action=update_zone_single_rule&item=' + item + '&sam_pro_nonce=' + options.samProNonce,\n      removeUrl: ajaxurl + '?action=remove_zone_single_rule&item=' + item + '&sam_pro_nonce=' + options.samProNonce,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n\n    const generalGrid = $('#aGrid').ejGrid({\n      dataSource: dmGeneral,\n      locale: ejLocale,\n      allowSorting: true,\n      allowSelection: true,\n      selectionType: ej.Grid.SelectionType.Single,\n      selectionSettings: {\n        selectionMode: [ej.Grid.SelectionMode.Row],\n        enableToggle: true\n      },\n      allowPaging: true,\n      pageSettings: {\n        pageSize: pageSize\n      },\n      editSettings: {allowEditing: true, allowDeleting: true, showDeleteConfirmDialog: true},\n      toolbarSettings: {\n        showToolbar: true,\n        toolbarItems: [\n          ej.Grid.ToolBarItems.Edit,\n          ej.Grid.ToolBarItems.Update,\n          ej.Grid.ToolBarItems.Cancel,\n          ej.Grid.ToolBarItems.Delete\n        ],\n        customToolbarItems: [\n          'Refresh',\n          'Add'\n        ]\n      },\n      toolbarClick: function (args) {\n        const tBarObj = $(args.target);\n        if (tBarObj.hasClass(\"Refresh\")) {\n          this.refreshContent();\n        }\n        else if (tBarObj.hasClass('Add')) {\n          rulesDialog.open();\n        }\n      },\n      create: function (args) {\n        $('.Refresh').parent('li').attr('title', localeStrings.refresh);\n        $('.Add').parent('li').attr('title', localeStrings.add);\n      },\n      actionComplete: function (args) {\n        const $tb = $('#aGrid_toolbarItems');\n        let li;\n        li = $('#aGrid_delete');\n        $tb.ejToolbar('disableItem', li);\n      },\n      recordClick: function (args) {\n        const $tb = $('#aGrid_toolbarItems');\n        let li;\n        const recs = this.getSelectedRecords();\n        const action = (recs.length === 0) ? 'disableItem' : 'enableItem';\n        li = $('#aGrid_delete');\n        $tb.ejToolbar(action, li);\n      },\n      columns: [\n        {field: 'zid', allowEditing: false, visible: false},\n        {field: 'slug', headerText: localeStrings.slug, isPrimaryKey: true, allowEditing: false, visible: false},\n        {field: 'single', allowEditing: false, visible: false},\n        {\n          field: 'priority',\n          headerText: localeStrings.priority,\n          allowEditing: false,\n          visible: false,\n          width: 100\n        },\n        {field: 'tax', headerText: localeStrings.type, allowEditing: false/*, width: 220*/},\n        {field: 'name', headerText: localeStrings.name, allowEditing: false},\n        {field: 'term_slug', allowEditing: false, visible: false},\n        {\n          field: 'pid',\n          foreignKeyField: 'pid',\n          foreignKeyValue: 'title',\n          dataSource: places,\n          headerText: localeStrings.place,\n          visible: true\n        }\n      ]\n    }).data('ejGrid');\n\n    const singleGrid = $('#sGrid').ejGrid({\n      dataSource: dmSingle,\n      locale: ejLocale,\n      allowSorting: true,\n      allowSelection: true,\n      selectionType: ej.Grid.SelectionType.Single,\n      selectionSettings: {\n        selectionMode: [ej.Grid.SelectionMode.Row],\n        enableToggle: true\n      },\n      allowPaging: true,\n      pageSettings: {\n        pageSize: pageSize\n      },\n      editSettings: {allowEditing: true, allowDeleting: true, showDeleteConfirmDialog: true},\n      toolbarSettings: {\n        showToolbar: true,\n        toolbarItems: [\n          ej.Grid.ToolBarItems.Edit,\n          ej.Grid.ToolBarItems.Update,\n          ej.Grid.ToolBarItems.Cancel,\n          ej.Grid.ToolBarItems.Delete\n        ],\n        customToolbarItems: [\n          'Refresh',\n          'Add'\n        ]\n      },\n      toolbarClick: function (args) {\n        const tBarObj = $(args.target);\n        if (tBarObj.hasClass(\"Refresh\")) {\n          this.refreshContent();\n        }\n        else if (tBarObj.hasClass('Add')) {\n          singleDialog.open();\n        }\n      },\n      create: function (args) {\n        $('.Refresh').parent('li').attr('title', localeStrings.refresh);\n        $('.Add').parent('li').attr('title', localeStrings.add);\n      },\n      actionComplete: function (args) {\n        const $tb = $('#sGrid_toolbarItems');\n        let li;\n        li = $('#sGrid_delete');\n        $tb.ejToolbar('disableItem', li);\n      },\n      recordClick: function (args) {\n        const $tb = $('#sGrid_toolbarItems');\n        let li;\n        const recs = this.getSelectedRecords();\n        const action = (recs.length === 0) ? 'disableItem' : 'enableItem';\n        li = $('#sGrid_delete');\n        $tb.ejToolbar(action, li);\n      },\n      columns: [\n        {field: 'zid', allowEditing: false, visible: false},\n        {field: 'slug', headerText: localeStrings.slug, isPrimaryKey: true, allowEditing: false, visible: false},\n        {field: 'single', allowEditing: false, visible: false},\n        {\n          field: 'priority',\n          headerText: localeStrings.priority,\n          textAlign: ej.TextAlign.Right,\n          editType: ej.Grid.EditingType.Numeric,\n          width: 100\n        },\n        {field: 'tax', headerText: localeStrings.type, allowEditing: false},\n        {field: 'name', headerText: localeStrings.name, allowEditing: false},\n        {field: 'term_slug', allowEditing: false, visible: false},\n        {\n          field: 'pid',\n          foreignKeyField: 'pid',\n          foreignKeyValue: 'title',\n          dataSource: places,\n          headerText: localeStrings.place,\n          visible: true\n        }\n      ]\n    }).data('ejGrid');\n  });\n})(jQuery);"]}