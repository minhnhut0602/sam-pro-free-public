{"version":3,"sources":["../js-src/sam.pro.statistics.js"],"names":[],"mappings":"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","file":"sam.pro.statistics.min.js","sourcesContent":["/**\n * Created by minimus on 20.07.2015.\n */\n(function($) {\n  const ejLocale = (options.locale.changeLocale) ? options.locale.locale : 'en-US';\n  const localeStrings = options.strings;\n  const startDate = options.periods[options.period].start;\n  const endDate = options.periods[options.period].end;\n  const intervalType = (options.period < 20) ? 'days' : 'months';\n  const labelFormat = ((options.period < 20) ? ((ejLocale === 'ru-RU') ? 'd MMM' : 'MMM dd') : 'MMM, yyyy');\n  const subTitle = (options.view === 'all') ? '' : ((options.owner === 'all') ? localeStrings.advertisers : localeStrings.advertiser + ': ' + options.owner);\n  const chartURI = ajaxurl + ((options.view === 'sold') ? '?action=load_chart_data' : '?action=load_chart_data_all') + '&sam_pro_nonce=' + options.samProNonce;\n  const gridURI = ajaxurl + ((options.view === 'sold') ? '?action=load_grid_data' : '?action=load_grid_data_all') + '&sam_pro_nonce=' + options.samProNonce;\n  const childGridURI = ajaxurl +\n    ((options.view === 'sold') ? `?action=load_grid_child_data&start=${startDate}&end=${endDate}&owner=${options.owner}&period=${options.period}` :\n      `?action=load_grid_child_data_all&start=${startDate}&end=${endDate}&owner=${options.owner}&period=${options.period}`) + '&sam_pro_nonce=' + options.samProNonce;\n  const pieURI = ajaxurl + ((options.view === 'sold') ? '?action=load_pie_data' : '?action=load_pie_data_all') + '&sam_pro_nonce=' + options.samProNonce;\n  const pie2URI = ajaxurl + ((options.view === 'sold') ? '?action=load_pie_data_2' : '?action=load_pie_data_2_all') + '&sam_pro_nonce=' + options.samProNonce;\n  const pieParams = `&item=${options.item}&start=${startDate}&end=${endDate}&period=${options.period}&owner=${options.owner}`;\n\n  $(document).ready(function() {\n    function getAdChart(aid, pid) {\n      const adChartURI = ajaxurl + '?action=load_ad_chart_data' + '&sam_pro_nonce=' + options.samProNonce;\n      const adChartParams = `&aid=${aid}&pid=${pid}&start=${startDate}&end=${endDate}&period=${options.period}`;\n      const dmAdChart = ej.DataManager({\n        url: adChartURI + adChartParams,\n        requestType: 'json',\n        adaptor: new ej.UrlAdaptor()\n      });\n      const queryAdChart = new ej.Query();\n      const promise = dmAdChart.executeQuery(queryAdChart);\n\n      promise.done((e) => {\n        const chart = $('#ad-chart').ejChart({\n            locale: ejLocale,\n            enableCanvasRendering: true,\n            canResize: true,\n            isResponsive: true,\n            theme: ej.datavisualization.Chart.Theme.FlatLight,\n            title: {\n              text: options.periods[options.period].title,\n              font: {\n                fontFamily: '\"Open Sans\",sans-serif',\n                fontWeight: 'bold'\n              }\n            },\n            primaryXAxis: {\n              valueType:\"datetime\",\n              intervalType: intervalType,\n              labelFormat: labelFormat\n            },\n            commonSeriesOptions: {\n              tooltip: {\n                visible:true ,\n                format: \"#series.name#: #point.y#\"\n              }\n            },\n            series: [\n              {\n                name: localeStrings.impressions,\n                type: 'column',\n                dataSource: dmAdChart,\n                xName: 'mdate',\n                yName: 'hits',\n                query: e.query, //queryAdChart,\n                marker: {\n                  dataLabel: {\n                    visible: true,\n                    textPosition: \"top\",\n                    fill: \"#FF7777\",\n                    verticalTextAlignment: \"top\",\n                    offset: 20,\n                    shape: \"rectangle\",\n                    font: {color: \"white\"}\n                  }\n                }\n              },\n              {\n                name: localeStrings.clicks,\n                type: 'column',\n                dataSource: dmAdChart,\n                xName: 'mdate',\n                yName: 'clicks',\n                query: e.query, //queryAdChart,\n                marker: {\n                  dataLabel: {\n                    visible: true,\n                    textPosition: \"top\",\n                    fill: \"#ffd45a\",\n                    verticalTextAlignment: \"top\",\n                    offset: 20,\n                    shape: \"rectangle\",\n                    font: {color: \"white\"}\n                  }\n                }\n              }\n            ]\n          }).data(\"ejChart\");\n        chart.redraw();\n      });\n\n      return false;\n    }\n\n    const adChartDialog = $('#chart-dialog').ejDialog({\n        width: 950,\n        allowDraggable: true,\n        enableModal: true,\n        showOnInit: false\n      }).data('ejDialog');\n\n    $('#close-chart').on('click', (e) => {\n      e.preventDefault();\n      adChartDialog.close();\n    });\n\n    const dmChart = ej.DataManager({\n      url: chartURI,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n    const queryChart = new ej.Query()\n      .addParams('item', options.item)\n      .addParams('start', startDate)\n      .addParams('end', endDate)\n      .addParams('owner', options.owner)\n      .addParams('period', options.period);\n    const chart = $('#chart').ejChart({\n      locale: ejLocale,\n      enableCanvasRendering: true,\n      canResize: true,\n      isResponsive: true,\n      //enable3D: true,\n      theme: ej.datavisualization.Chart.Theme.FlatLight,\n      title: {\n        text: options.periods[options.period].title,\n        font: {\n          fontFamily: '\"Open Sans\",sans-serif',\n          fontWeight: 'bold'\n        },\n        subTitle: {\n          text: subTitle,\n          font: {\n            size: \"14px\",\n            fontFamily: '\"Open Sans\",sans-serif',\n            fontWeight: 'bold'\n          }\n        }\n      },\n      primaryXAxis: {\n        valueType: \"datetime\",\n        intervalType: intervalType,\n        labelFormat: labelFormat\n      },\n      commonSeriesOptions: {\n        tooltip: {\n          visible: true,\n          format: \"#series.name#: #point.y#\"\n        }\n      },\n      series: [\n        {\n          name: localeStrings.impressions,\n          type: 'column',\n          dataSource: dmChart,\n          xName: 'mdate',\n          yName: 'hits',\n          query: queryChart,\n          enableSmartLabels: true,\n          marker: {\n            dataLabel: {\n              visible: true,\n              textPosition: \"top\",\n              fill: \"#FF7777\",\n              verticalTextAlignment: \"top\",\n              offset: 10,\n              shape: \"rectangle\",\n              font: {color: \"white\"}\n            }\n          }\n        },\n        {\n          name: localeStrings.clicks,\n          type: 'column',\n          dataSource: dmChart,\n          xName: 'mdate',\n          yName: 'clicks',\n          query: queryChart,\n          marker: {\n            dataLabel: {\n              visible: true,\n              textPosition: \"top\",\n              fill: \"#ffd45a\",\n              verticalTextAlignment: \"top\",\n              offset: 20,\n              shape: \"rectangle\",\n              font: {color: \"white\"}\n            }\n          }\n        }\n      ]\n    });\n\n    const dmGrid = ej.DataManager({\n      url: gridURI,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n    const dmChildGrid = ej.DataManager({\n      url: childGridURI,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n    const gridColumns = (options.view === 'sold') ? [\n      {field: 'pid', headerText: localeStrings.adId, isPrimaryKey: true, textAlign: ej.TextAlign.Right, width: 70},\n      {field: 'title', headerText: localeStrings.name},\n      {field: 'hits', headerText: localeStrings.impressions, textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'clicks', headerText: localeStrings.clicks, textAlign: ej.TextAlign.Right, width: 80},\n      {field: 'income', headerText: localeStrings.income, textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'cpm', headerText: 'CPM', textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'cpc', headerText: 'CPC', textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'ctr', headerText: 'CTR', textAlign: ej.TextAlign.Right, width: 100}\n    ] : [\n      {field: 'pid', headerText: localeStrings.adId, isPrimaryKey: true, textAlign: ej.TextAlign.Right, width: 70},\n      {field: 'title', headerText: localeStrings.name},\n      {field: 'hits', headerText: localeStrings.impressions, textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'clicks', headerText: localeStrings.clicks, textAlign: ej.TextAlign.Right, width: 80},\n      {field: 'sold', headerText: localeStrings.status, textAlign: ej.TextAlign.Center, width: 100}\n    ];\n    const childGridColumns = (options.view === 'sold') ? [\n      {field: 'pid', headerText: 'Place ID', isPrimaryKey: true, visible: false},\n      {field: 'aid', headerText: localeStrings.adId, textAlign: ej.TextAlign.Right, width: 70},\n      {field: 'title', headerText: localeStrings.name},\n      {field: 'hits', headerText: localeStrings.impressions, textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'clicks', headerText: localeStrings.clicks, textAlign: ej.TextAlign.Right, width: 80},\n      {field: 'income', headerText: localeStrings.income, textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'cpm', headerText: 'CPM', textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'cpc', headerText: 'CPC', textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'ctr', headerText: 'CTR', textAlign: ej.TextAlign.Right, width: 100}\n    ] : [\n      {field: 'pid', headerText: 'Place ID', isPrimaryKey: true, visible: false},\n      {field: 'aid', headerText: localeStrings.adId, textAlign: ej.TextAlign.Right, width: 70},\n      {field: 'title', headerText: localeStrings.name},\n      {field: 'hits', headerText: localeStrings.impressions, textAlign: ej.TextAlign.Right, width: 100},\n      {field: 'clicks', headerText: localeStrings.clicks, textAlign: ej.TextAlign.Right, width: 80}\n    ];\n    const grid = $('#grid').ejGrid({\n      dataSource: dmGrid,\n      query: new ej.Query()\n        .addParams('item', options.item)\n        .addParams('start', startDate)\n        .addParams('end', endDate)\n        .addParams('owner', options.owner)\n        .addParams('period', options.period),\n      locale: ejLocale,\n      allowTextWrap: true,\n      allowPaging: true,\n      pageSettings: {pageSize: options.itemsPerPage},\n      allowSelection: true,\n      selectionType: ej.Grid.SelectionType.Single,\n      selectionSettings: {\n        selectionMode: [ej.Grid.SelectionMode.Row],\n        enableToggle: true\n      },\n      columns: gridColumns,\n      childGrid: {\n        dataSource: dmChildGrid,\n        queryString: \"pid\",\n        locale: ejLocale,\n        allowTextWrap: true,\n        allowSelection: true,\n        selectionType: ej.Grid.SelectionType.Single,\n        selectionSettings: {\n          selectionMode: [ej.Grid.SelectionMode.Row],\n          enableToggle: true\n        },\n        toolbarSettings: {\n          showToolbar: true,\n          customToolbarItems: ['Ad_Chart']\n        },\n        columns: childGridColumns,\n        actionComplete: function (args) {\n          if (args.requestType === 'refresh') {\n            const $toolbar = $('#' + this._id + '_toolbarItems');\n            const li = $('#' + this._id + '_Ad_Chart');\n            $toolbar.ejToolbar('disableItem', li);\n          }\n        },\n        toolbarClick: function (args) {\n          const tbarObj = $(args.target);\n          const rec = this.getSelectedRecords();\n          const pid = rec[0].pid;\n          const aid = rec[0].aid;\n          if (tbarObj.hasClass('Ad_Chart')) {\n            const adChart = getAdChart(aid, pid);\n            adChartDialog.open();\n            //adChart.redraw();\n          }\n        },\n        recordClick: function (args) {\n          const $toolbar = $('#' + this._id + '_toolbarItems');\n          const li = $('#' + this._id + '_Ad_Chart');\n          const recs = this.getSelectedRecords();\n          const action = (recs.length === 0) ? 'disableItem' : 'enableItem';\n          $toolbar.ejToolbar(action, li);\n        },\n        create: function (args) {\n          $('.Ad_Chart').parent('li').attr('title', localeStrings.statistics);\n        }\n      }\n    }).data('ejGrid');\n    const dmPie = ej.DataManager({\n      url: pieURI + pieParams,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n    const dmPie2 = ej.DataManager({\n      url: pie2URI + pieParams,\n      requestType: 'json',\n      adaptor: new ej.UrlAdaptor()\n    });\n    /*pieQuery = new ej.Query()\n     .addParams('item', options.item)\n     .addParams('start', startDate)\n     .addParams('end', endDate)\n     .addParams('owner', options.owner)\n     .addParams('period', options.period),\n     pieQuery2 = new ej.Query()\n     .addParams('item', options.item)\n     .addParams('start', startDate)\n     .addParams('end', endDate)\n     .addParams('owner', options.owner)\n     .addParams('period', options.period),*/\n    const pieHits = $('#pieChartHits').ejChart({\n      //size: {width: '250px', height: '300px'},\n      title: {\n        text: localeStrings.impressions,\n        font: {\n          fontFamily: '\"Open Sans\",sans-serif',\n          fontWeight: 'bold',\n          size: '20px'\n        }\n      },\n      series: [{\n        dataSource: dmPie,\n        query: new ej.Query(),//pieQuery,\n        xName: 'title',\n        yName: 'hits',\n        type: 'doughnut',\n        tooltip: {\n          format: \"#point.x# : #point.y#\",\n          visible: true\n        },\n        labelPosition: 'outside',\n        doughnutCoefficient: 0.4,\n        marker: {\n          dataLabel: {\n            visible: true,\n            connectorLine: {height: 20},\n            font: {size: '13px'}\n          }\n        }\n      }],\n      isResponsive: true,\n      legend: {visible: true}\n    });\n    const pieClicks = $('#pieChartClicks').ejChart({\n      title: {\n        text: localeStrings.clicks,\n        font: {\n          fontFamily: '\"Open Sans\",sans-serif',\n          fontWeight: 'bold',\n          size: '20px'\n        }\n      },\n      series: [{\n        dataSource: dmPie2,\n        query: new ej.Query(),//pieQuery2,\n        tooltip: {\n          format: \"#point.x# : #point.y#\",\n          visible: true\n        },\n        xName: 'title',\n        yName: 'clicks',\n        type: 'doughnut',\n        marker: {\n          dataLabel: {\n            visible: true,\n            connectorLine: {height: 20},\n            font: {size: '13px'}\n          }\n        },\n        labelPosition: 'outside'\n      }],\n      isResponsive: true,\n      legend: {visible: true}\n    });\n\n\n  });\n})(jQuery);\n"]}