{"version":3,"sources":["../js-src/sam.pro.layout.js"],"names":[],"mappings":"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","file":"sam.pro.layout.min.js","sourcesContent":["/**\r\n * Created by minimus on 12.07.2015.\r\n */\r\n(function ($) {\r\n  $(document).ready(function () {\r\n    const options = samProOptions;\r\n    const doStats = (options.doStats === '1');\r\n    const jsStats = (1 === parseInt(options.jsStats, 10));\r\n    //const mailer = (options.mailer === '1');\r\n    const load = (options.load === '1');\r\n    const path = options.ajaxUrl;\r\n    const nonce = options.samProNonce;\r\n    const data = options.clauses;\r\n    const hits = [];\r\n    const aHits = [];\r\n\r\n\r\n    if (load) {\r\n      // Ads loaded by PHP\r\n      if (doStats) {\r\n        $(`div.${options.place}, span.${options.place}`).each((i, el) => {\r\n          const ids = el.id.split('_');\r\n          const aid = ids[1];\r\n          const pid = ids[2];\r\n          hits.push({aid: aid, pid: pid});\r\n          $(el).find('a').on('click', () => {\r\n            $.post(path, {action: 'sam_click', aid, pid, sam_pro_nonce: nonce});\r\n          });\r\n          $(el).find('iframe').iframeTracker({\r\n            blurCallback: function () {\r\n              $.post(path, {action: 'sam_click', aid, pid, sam_pro_nonce: nonce});\r\n            }\r\n          });\r\n        });\r\n\r\n        if (jsStats && !!hits) {\r\n          $.post(path, {action: 'sam_hits', hits, sam_pro_nonce: nonce});\r\n        }\r\n      }\r\n\r\n      // Loading Ads\r\n      const ads = [];\r\n      $(`div.${options.ad}, span.${options.ad}`).each((i, el) => {\r\n        let codes = $(el).data('spc');\r\n        if ('undefined' === typeof codes) codes = 0;\r\n        const ids = el.id.split('_');\r\n        const id = ids[1];\r\n        const pid = ids[2];\r\n\r\n        ads.push({pid, aid: id, codes, eid: el.id});\r\n      });\r\n\r\n      if (ads.length > 0) {\r\n        $.post(path, {action: 'sam_load_ads', ads, data, sam_pro_nonce: nonce})\r\n          .done((response) => {\r\n            if (response.success) {\r\n              $.each(response.data, (i, ad) => {\r\n                $('#' + ad.eid).replaceWith(ad.ad);\r\n                if (doStats) {\r\n                  const cnt = $('#' + ad.cid);\r\n                  cnt.find('a').on('click', () => {\r\n                    $.post(path, {action: 'sam_click', aid: ad.aid, pid: ad.pid, sam_pro_nonce: nonce});\r\n                  });\r\n                  cnt.find('iframe').iframeTracker({\r\n                    blurCallback: function () {\r\n                      $.post(path, {action: 'sam_click', aid: ad.aid, pid: ad.pid, sam_pro_nonce: nonce});\r\n                    }\r\n                  });\r\n                  aHits.push({pid: ad.pid, aid: ad.aid});\r\n                }\r\n              });\r\n            }\r\n            if (doStats && jsStats && !!aHits) {\r\n              $.post(path, {action: 'sam_hits', hits: aHits, sam_pro_nonce: nonce});\r\n            }\r\n          });\r\n      }\r\n    }\r\n    else {\r\n      if (doStats) {\r\n        $(`div.${options.container}, span.${options.container}`).each((i, el) => {\r\n          const ids = el.id.split('_');\r\n          const aid = ids[1];\r\n          const pid = ids[2];\r\n          hits.push({aid: aid, pid: pid});\r\n          $(el).find('a').on('click', () => {\r\n            $.post(path, {action: 'sam_click', aid, pid, sam_pro_nonce: nonce});\r\n          });\r\n          $(el).find('iframe').iframeTracker({\r\n            blurCallback: function () {\r\n              $.post(path, {action: 'sam_click', aid, pid, sam_pro_nonce: nonce});\r\n            }\r\n          });\r\n        });\r\n\r\n        if (jsStats && !!hits) {\r\n          $.post(path, {action: 'sam_hits', hits, sam_pro_nonce: nonce});\r\n        }\r\n      }\r\n    }\r\n  });\r\n})(jQuery);"]}