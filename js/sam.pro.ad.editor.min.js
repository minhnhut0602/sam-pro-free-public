'use strict';var sam=sam||{};(function(b){function a(a){var b=[];return j.forEach(function(c,d){a&c&&b.push(d)}),b}function c(a,b){for(var c=0;c<a.length;c++)parseInt(a[c].id,10);return out}function d(a,b,c){for(var d=parseInt(c,10),e=0;e<a.length;e++)~parseInt(a[e].id,10);return out&=~p,out}var f,g=options.media,e=options.strings,h=options.locale.changeLocale?options.locale.locale:'en-US',i=options.strings,j=[1,2,4,8,8192,16,32,64,128,256,512,1024,2048,16384,4096];sam.media=f={buttonId:'#banner-media',adUrl:'#img',adImgId:'#img_id',adName:'#title',adDesc:'#description',adLink:'#link',adAlt:'#alt',adFallback:'#swf_fallback',btnFallback:'#fallback-code',init:function init(){b(this.buttonId).on('click',this.openMediaDialog),b(this.btnFallback).on('click',this.openMediaDialog)},openMediaDialog:function openMediaDialog(a){a.preventDefault();var b='#'+a.currentTarget.id;return this._frame?void this._frame.open():void(this._frame=f.frame=wp.media({title:g.title,button:{text:g.button},multiple:!1,library:{type:'image'}}),this._frame.state('library').on('select',function(){var a=this.get('selection').single();f.handleMediaAttachment(a,b)}),this._frame.open())},handleMediaAttachment:function handleMediaAttachment(c,a){var d=c.toJSON();if(a===this.buttonId)b(this.adUrl).val(d.url),b(this.adImgId).val(d.id),''===b(this.adName).val()&&''!==d.title&&b(this.adName).val(d.title),''===b(this.adDesc).val()&&''!==d.caption&&b(this.adDesc).val(d.caption),''===b(this.adAlt).val()&&''!==d.alt&&b(this.adAlt).val(d.alt);else if(a===this.btnFallback){var e=b(this.adLink).val(),f=''===e?'':'<a href="'+e+'">',g='<img src="'+d.url+'">',h=''===e?'':'</a>';b(this.adFallback).val(f+g+h)}}},b(document).ready(function(){var g=this;b('#tabs').ejTab({enablePersistence:!0}),f.init();var j=b('#rc-cmf'),k=b('#rc-cmt');b('#amode_false').click(function(){j.show('blind',{direction:'vertical'},500),k.hide('blind',{direction:'vertical'},500)}),b('#amode_true').click(function(){j.hide('blind',{direction:'vertical'},500),k.show('blind',{direction:'vertical'},500)});var l=b('#ptypes'),m=parseInt(l.val(),10),n=b('#page-types').ejTreeView({showCheckbox:!0,checkedNodes:a(parseInt(l.val(),10)),nodeCheck:function nodeCheck(a){m=c(a.currentCheckedNodes,m,a.parentId),l.val(m)},nodeUncheck:function nodeUncheck(a){m=d(a.currentUncheckedNodes,m,a.parentId),l.val(m)}}).data('ejTreeView');n.expandAll();var o=b('#rc-vt0');b('input:radio[name=ptype]').on('click',function(){var a=b('input:radio[name=ptype]:checked').val();0===a?o.is(':visible')&&o.hide('blind',{direction:'vertical'},500):1===a&&o.is(':hidden')&&o.show('blind',{direction:'vertical'},500)});var q=b('#rc-posts'),r=b('#eposts'),s=b('#rc-cats'),t=b('#ecats'),u=b('#rc-tags'),v=b('#etags'),w=b('#rc-authors'),x=b('#eauthors'),y=b('#rc-tax'),z=b('#etax'),A=b('#rc-types'),B=b('#etypes'),C=b('#rc-schedule'),D=b('#schedule'),E=b('#rc-hl'),F=b('#limit_hits'),G=b('#rc-cl'),H=b('#limit_clicks');r.on('click',function(){r.is(':checked')?q.show('blind',{direction:'vertical'},500):q.hide('blind',{direction:'vertical'},500)}),t.on('click',function(){t.is(':checked')?s.show('blind',{direction:'vertical'},500):s.hide('blind',{direction:'vertical'},500)}),v.on('click',function(){v.is(':checked')?u.show('blind',{direction:'vertical'},500):u.hide('blind',{direction:'vertical'},500)}),x.on('click',function(){x.is(':checked')?w.show('blind',{direction:'vertical'},500):w.hide('blind',{direction:'vertical'},500)}),z.on('click',function(){z.is(':checked')?y.show('blind',{direction:'vertical'},500):y.hide('blind',{direction:'vertical'},500)}),B.on('click',function(){B.is(':checked')?A.show('blind',{direction:'vertical'},500):A.hide('blind',{direction:'vertical'},500)}),D.on('click',function(){D.is(':checked')?C.show('blind',{direction:'vertical'},500):C.hide('blind',{direction:'vertical'},500)}),F.on('click',function(){F.is(':checked')?E.show('blind',{direction:'vertical'},500):E.hide('blind',{direction:'vertical'},500)}),H.on('click',function(){H.is(':checked')?G.show('blind',{direction:'vertical'},500):G.hide('blind',{direction:'vertical'},500)});var I={width:830,allowDraggable:!0,enableModal:!0,showOnInit:!1},J=b('#postsDialog').ejDialog(I).data('ejDialog'),K=b('#catsDialog').ejDialog(I).data('ejDialog'),L=b('#tagsDialog').ejDialog(I).data('ejDialog'),M=b('#authorsDialog').ejDialog(I).data('ejDialog'),N=b('#taxDialog').ejDialog(I).data('ejDialog'),O=b('#typesDialog').ejDialog(I).data('ejDialog'),P=b('#posts'),Q=new Selectors;Q.sid=P.val();var R=b('#cats'),S=new Selectors;S.sid=R.val();var T=b('#tags'),U=new Selectors;U.sid=T.val();var V=b('#authors'),W=new Selectors;W.sid=V.val();var X=b('#taxes'),Y=new Selectors;Y.sid=X.val();var Z=b('#types'),$=new Selectors;$.sid=Z.val();var _=encodeURI(e.posts),aa=encodeURI(e.page),ba=ej.DataManager({url:ajaxurl+'?action=load_posts&cstr='+options.data.custList+'&sam_pro_nonce='+options.samProNonce+'&sp='+_+'&spg='+aa+(''===P.val()?'':'&ids='+P.val()),requestType:'json',adaptor:new ej.UrlAdaptor}),ca=ej.DataManager({url:ajaxurl+'?action=load_cats&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),da=ej.DataManager({url:ajaxurl+'?action=load_tags&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),ea=ej.DataManager({url:ajaxurl+'?action=load_authors&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),fa=ej.DataManager({url:ajaxurl+'?action=load_taxes&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),ga=ej.DataManager({url:ajaxurl+'?action=load_types&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),ha=b('#postsGrid').ejGrid({dataSource:ba,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'type',headerText:i.type,width:250}],rowSelected:function rowSelected(a){if(!Q.service){Q.page=a.model.pageSettings.currentPage;var b=Q.pids[Q.page].slice(0),c=b.indexOf(a.data.id);-1<c?Q.removePid(a.data.id):Q.pids=a.data.id}},actionComplete:function actionComplete(a){var b=Q.ids.slice(0);if(Q.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].id&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(Q.page=a.currentPage,Q.pids=this.model.currentViewData[c].id):'refresh'===a.requestType&&(Q.page=1,Q.pids=this.model.currentViewData[c].id));Q.service=!1}}).data('ejGrid'),ia=b('#catsGrid').ejGrid({dataSource:ca,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'slug',headerText:i.slug,width:250}],rowSelected:function rowSelected(a){if(!S.service){S.page=a.model.pageSettings.currentPage;var b=S.pids[S.page].slice(0),c=b.indexOf(a.data.slug);-1<c?S.removePid(a.data.slug):S.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=S.ids.slice(0);if(S.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(S.page=a.currentPage,S.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(S.page=1,S.pids=this.model.currentViewData[c].slug));S.service=!1}}).data('ejGrid'),ja=b('#tagsGrid').ejGrid({dataSource:da,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'slug',headerText:i.slug,width:250}],rowSelected:function rowSelected(a){if(!U.service){U.page=a.model.pageSettings.currentPage;var b=U.pids[U.page].slice(0),c=b.indexOf(a.data.slug);-1<c?U.removePid(a.data.slug):U.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=U.ids.slice(0);if(U.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(U.page=a.currentPage,U.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(U.page=1,U.pids=this.model.currentViewData[c].slug));U.service=!1}}).data('ejGrid'),ka=b('#authorsGrid').ejGrid({dataSource:ea,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'slug',headerText:i.slug,width:250}],rowSelected:function rowSelected(a){if(!W.service){W.page=a.model.pageSettings.currentPage;var b=W.pids[W.page].slice(0),c=b.indexOf(a.data.slug);-1<c?W.removePid(a.data.slug):W.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=W.ids.slice(0);if(W.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(W.page=a.currentPage,W.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(W.page=1,W.pids=this.model.currentViewData[c].slug));W.service=!1}}).data('ejGrid'),la=b('#taxGrid').ejGrid({dataSource:fa,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.termName,width:480},{field:'ctax_name',headerText:i.ctName,width:250},{field:'slug',headerText:i.slug,visible:!1}],rowSelected:function rowSelected(a){if(!Y.service){Y.page=a.model.pageSettings.currentPage;var b=Y.pids[Y.page].slice(0),c=b.indexOf(a.data.slug);-1<c?Y.removePid(a.data.slug):Y.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=Y.ids.slice(0);if(Y.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(Y.page=a.currentPage,Y.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(Y.page=1,Y.pids=this.model.currentViewData[c].slug));Y.service=!1}}).data('ejGrid'),ma=b('#typesGrid').ejGrid({dataSource:ga,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},columns:[{field:'title',headerText:i.ctt,width:480},{field:'slug',headerText:i.ctSlug,width:250}],rowSelected:function rowSelected(a){if(!$.service){$.page=a.model.pageSettings.currentPage;var b=$.pids[$.page].slice(0),c=b.indexOf(a.data.slug);-1<c?$.removePid(a.data.slug):$.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=$.ids.slice(0);if($.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?($.page=a.currentPage,$.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&($.page=1,$.pids=this.model.currentViewData[c].slug));$.service=!1}}).data('ejGrid');b('#cancel-posts').on('click',function(){return J.close()}),b('#select-posts').on('click',function(){P.val(Q.sid),J.close()}),b('#showPosts').on('click',function(a){a.preventDefault(),Q.sid=P.val(),ha.refreshContent(),J.open()}),b('#cancel-cats').on('click',function(){return K.close()}),b('#select-cats').on('click',function(){R.val(S.sid),K.close()}),b('#showCats').on('click',function(a){a.preventDefault(),S.sid=R.val(),ia.refreshContent(),K.open()}),b('#cancel-tags').on('click',function(){return L.close()}),b('#select-tags').on('click',function(){T.val(U.sid),L.close()}),b('#showTags').on('click',function(a){a.preventDefault(),U.sid=T.val(),ja.refreshContent(),L.open()}),b('#cancel-authors').on('click',function(){M.close()}),b('#select-authors').on('click',function(){V.val(W.sid),M.close()}),b('#showAuthors').on('click',function(a){a.preventDefault(),W.sid=V.val(),ka.refreshContent(),M.open()}),b('#cancel-tax').on('click',function(){return N.close()}),b('#select-tax').on('click',function(){X.val(Y.sid),N.close()}),b('#showTaxes').on('click',function(a){a.preventDefault(),Y.sid=X.val(),la.refreshContent(),N.open()}),b('#cancel-types').on('click',function(){return O.close()}),b('#select-types').on('click',function(){Z.val($.sid),O.close()}),b('#showTypes').on('click',function(a){a.preventDefault(),$.sid=Z.val(),ma.refreshContent(),O.open()});var na=b('#sdate'),oa=b('#fdate'),pa=b('#startDate').ejDateTimePicker({width:250,locale:h,buttonText:options.buttonText,dateTimeFormat:'yyyy-MM-dd HH:mm:ss',timeDisplayFormat:'HH:mm:ss',value:na.val(),change:function change(a){na.val(a.value)}}).data('ejDateTimePicker'),qa=b('#finishDate').ejDateTimePicker({width:250,locale:h,buttonText:options.buttonText,dateTimeFormat:'yyyy-MM-dd HH:mm:ss',timeDisplayFormat:'HH:mm:ss',value:oa.val(),change:function change(a){oa.val(a.value)}}).data('ejDateTimePicker'),ra=b('#custom-users'),sa=b('input:radio[name=users]'),ta=b('#x-reg-users'),ua=b('#users_reg'),va=b('#x-view-users'),wa=b('#xusers');sa.on('click',function(){var a=b('input:radio[name=users]:checked').val();0===a?ra.hide('blind',{direction:'vertical'},500):ra.show('blind',{direction:'vertical'},500)}),ua.on('click',function(){ua.is(':checked')?ta.show('blind',{direction:'vertical'},500):ta.hide('blind',{direction:'vertical'},500)}),wa.on('click',function(){wa.is(':checked')?va.show('blind',{direction:'vertical'},500):va.hide('blind',{direction:'vertical'},500)});var xa=b('#xvusers'),ya=new Selectors;ya.sid=xa.val();var za=b('#usersDialog').ejDialog(I).data('ejDialog'),Aa='&subscriber='+encodeURI(e.subscriber)+'&contributor='+encodeURI(e.contributor)+'&author='+encodeURI(e.author)+'&editor='+encodeURI(e.editor)+'&admin='+encodeURI(e.admin)+'&sadmin='+encodeURI(e.superAdmin),Ba=ej.DataManager({url:ajaxurl+'?action=load_users&sam_pro_nonce='+options.samProNonce+Aa,requestType:'json',adaptor:new ej.UrlAdaptor}),Ca=b('#usersGrid').ejGrid({dataSource:Ba,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.display,width:330},{field:'slug',headerText:i.user,width:250},{field:'role',headerText:i.role,width:150}],rowSelected:function rowSelected(a){if(!ya.service){ya.page=a.model.pageSettings.currentPage;var b=ya.pids[ya.page].slice(0),c=b.indexOf(a.data.slug);-1<c?ya.removePid(a.data.slug):ya.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=ya.ids.slice(0);if(ya.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(ya.page=a.currentPage,ya.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(ya.page=1,ya.pids=this.model.currentViewData[c].slug));ya.service=!1}}).data('ejGrid');b('#cancel-users').on('click',function(){return za.close()}),b('#select-users').on('click',function(){xa.val(ya.sid),za.close()}),b('#showXUsers').on('click',function(a){a.preventDefault(),ya.sid=xa.val(),Ca.refreshContent(),za.open()});var Da=options.advertisers,Ea=b('#advertsDialog').ejDialog(I).data('ejDialog'),Fa=b('#advertsGrid').ejGrid({dataSource:ej.DataManager(Da),locale:h,allowSorting:!0,allowSelection:!0,allowFiltering:!0,filterSettings:{filterType:'menu'},selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'owner',headerText:i.nick},{field:'owner_name',headerText:i.display},{field:'owner_mail',headerText:i.mail}]}).data('ejGrid');b('#select-adverts').on('click',function(){var a=Fa.model.selectedRecords;if(1===a.length){var c=a[0];b('#owner').val(c.owner),b('#owner_name').val(c.owner_name),b('#owner_mail').val(c.owner_mail)}Ea.close()}),b('#cancel-adverts').on('click',function(){return Ea.close()}),b('#showAdvertisers').on('click',function(a){a.preventDefault(),Ea.open()});var Ga=b('#swf'),Ha=b('#swf-params'),Ia=b('#link');Ga.on('click',function(){Ga.is(':checked')?Ha.show('blind',{direction:'vertical'},500):Ha.hide('blind',{direction:'vertical'},500)});var Ja,Ka=b('#click-tag'),La=b('#swf_vars');Ia.on('change',function(){''===g.value?Ka.prop('disabled',!0):Ka.prop('disabled',!1)}),Ka.on('click',function(a){a.preventDefault();var b=La.val();Ja=Ia.val(),''===b?La.val('{clickTAG: escape("'+Ja+'")}'):La.val(b.replace('}',', clickTAG: escape("'+Ja+'")}')),Ia.val('')})})})(jQuery);

//# sourceMappingURL=sam.pro.ad.editor.min.js.map