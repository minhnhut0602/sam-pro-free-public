'use strict';var sam={};(function(b){function a(a){var b=[];return j.forEach(function(c,d){a&c&&b.push(d)}),b}function c(a,b){var c=b;return a.forEach(function(a){return c|=parseInt(a.id,10)}),c}function d(a,b,c){var d=b,e=parseInt(c,10);return a.forEach(function(a){return d&=~parseInt(a.id,10)}),d&=~e,d}var f,g=options.media,e=options.strings,h=options.locale.changeLocale?options.locale.locale:'en-US',i=options.strings,j=[1,2,4,8,8192,16,32,64,128,256,512,1024,2048,16384,4096];sam.media=f={buttonId:'#banner-media',adUrl:'#img',adImgId:'#img_id',adName:'#title',adDesc:'#description',adLink:'#link',adAlt:'#alt',adFallback:'#swf_fallback',btnFallback:'#fallback-code',init:function init(){b(this.buttonId).on('click',this.openMediaDialog),b(this.btnFallback).on('click',this.openMediaDialog)},openMediaDialog:function openMediaDialog(a){a.preventDefault();var b='#'+a.currentTarget.id;return this._frame?void this._frame.open():void(this._frame=f.frame=wp.media({title:g.title,button:{text:g.button},multiple:!1,library:{type:'image'}}),this._frame.state('library').on('select',function(){var a=this.get('selection').single();f.handleMediaAttachment(a,b)}),this._frame.open())},handleMediaAttachment:function handleMediaAttachment(c,a){var d=c.toJSON();if(a===this.buttonId)b(this.adUrl).val(d.url),b(this.adImgId).val(d.id),''===b(this.adName).val()&&''!==d.title&&b(this.adName).val(d.title),''===b(this.adDesc).val()&&''!==d.caption&&b(this.adDesc).val(d.caption),''===b(this.adAlt).val()&&''!==d.alt&&b(this.adAlt).val(d.alt);else if(a===this.btnFallback){var e=b(this.adLink).val(),f=''===e?'':'<a href="'+e+'">',g='<img src="'+d.url+'">',h=''===e?'':'</a>';b(this.adFallback).val(f+g+h)}}},b(document).ready(function(){var g=this;b('#tabs').ejTab({enablePersistence:!0}),f.init();var j=b('#rc-cmf'),k=b('#rc-cmt');b('#amode_false').click(function(){j.show('blind',{direction:'vertical'},500),k.hide('blind',{direction:'vertical'},500)}),b('#amode_true').click(function(){j.hide('blind',{direction:'vertical'},500),k.show('blind',{direction:'vertical'},500)});var l=b('#ptypes'),m=parseInt(l.val(),10)||0,n=b('#page-types').ejTreeView({showCheckbox:!0,checkedNodes:a(m),nodeCheck:function nodeCheck(a){m=c(a.currentCheckedNodes,m,a.parentId),l.val(m)},nodeUncheck:function nodeUncheck(a){m=d(a.currentUncheckedNodes,m,a.parentId),l.val(m)}}).data('ejTreeView');n.expandAll();var o=b('#rc-vt0');b('input:radio[name=ptype]').on('click',function(){var a=parseInt(b('input:radio[name=ptype]:checked').val(),10);0===a?o.is(':visible')&&o.hide('blind',{direction:'vertical'},500):1===a&&o.is(':hidden')&&o.show('blind',{direction:'vertical'},500)});var p=b('#rc-posts'),q=b('#eposts'),r=b('#rc-cats'),s=b('#ecats'),t=b('#rc-tags'),u=b('#etags'),v=b('#rc-authors'),w=b('#eauthors'),x=b('#rc-tax'),y=b('#etax'),z=b('#rc-types'),A=b('#etypes'),B=b('#rc-schedule'),C=b('#schedule'),D=b('#rc-hl'),E=b('#limit_hits'),F=b('#rc-cl'),G=b('#limit_clicks');q.on('click',function(){q.is(':checked')?p.show('blind',{direction:'vertical'},500):p.hide('blind',{direction:'vertical'},500)}),s.on('click',function(){s.is(':checked')?r.show('blind',{direction:'vertical'},500):r.hide('blind',{direction:'vertical'},500)}),u.on('click',function(){u.is(':checked')?t.show('blind',{direction:'vertical'},500):t.hide('blind',{direction:'vertical'},500)}),w.on('click',function(){w.is(':checked')?v.show('blind',{direction:'vertical'},500):v.hide('blind',{direction:'vertical'},500)}),y.on('click',function(){y.is(':checked')?x.show('blind',{direction:'vertical'},500):x.hide('blind',{direction:'vertical'},500)}),A.on('click',function(){A.is(':checked')?z.show('blind',{direction:'vertical'},500):z.hide('blind',{direction:'vertical'},500)}),C.on('click',function(){C.is(':checked')?B.show('blind',{direction:'vertical'},500):B.hide('blind',{direction:'vertical'},500)}),E.on('click',function(){E.is(':checked')?D.show('blind',{direction:'vertical'},500):D.hide('blind',{direction:'vertical'},500)}),G.on('click',function(){G.is(':checked')?F.show('blind',{direction:'vertical'},500):F.hide('blind',{direction:'vertical'},500)});var H={width:830,allowDraggable:!0,enableModal:!0,showOnInit:!1},I=b('#postsDialog').ejDialog(H).data('ejDialog'),J=b('#catsDialog').ejDialog(H).data('ejDialog'),K=b('#tagsDialog').ejDialog(H).data('ejDialog'),L=b('#authorsDialog').ejDialog(H).data('ejDialog'),M=b('#taxDialog').ejDialog(H).data('ejDialog'),N=b('#typesDialog').ejDialog(H).data('ejDialog'),O=b('#posts'),P=new Selectors;P.sid=O.val();var Q=b('#cats'),R=new Selectors;R.sid=Q.val();var S=b('#tags'),T=new Selectors;T.sid=S.val();var U=b('#authors'),V=new Selectors;V.sid=U.val();var W=b('#taxes'),X=new Selectors;X.sid=W.val();var Y=b('#types'),Z=new Selectors;Z.sid=Y.val();var $=encodeURI(e.posts),_=encodeURI(e.page),aa=ej.DataManager({url:ajaxurl+'?action=load_posts&cstr='+options.data.custList+'&sam_pro_nonce='+options.samProNonce+'&sp='+$+'&spg='+_+(''===O.val()?'':'&ids='+O.val()),requestType:'json',adaptor:new ej.UrlAdaptor}),ba=ej.DataManager({url:ajaxurl+'?action=load_cats&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),ca=ej.DataManager({url:ajaxurl+'?action=load_tags&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),da=ej.DataManager({url:ajaxurl+'?action=load_authors&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),ea=ej.DataManager({url:ajaxurl+'?action=load_taxes&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),fa=ej.DataManager({url:ajaxurl+'?action=load_types&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),ga=b('#postsGrid').ejGrid({dataSource:aa,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'type',headerText:i.type,width:250}],rowSelected:function rowSelected(a){if(!P.service){P.page=a.model.pageSettings.currentPage;var b=P.pids[P.page].slice(0),c=b.indexOf(a.data.id);-1<c?P.removePid(a.data.id):P.pids=a.data.id}},actionComplete:function actionComplete(a){var b=P.ids.slice(0);if(P.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].id&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(P.page=a.currentPage,P.pids=this.model.currentViewData[c].id):'refresh'===a.requestType&&(P.page=1,P.pids=this.model.currentViewData[c].id));P.service=!1}}).data('ejGrid'),ha=b('#catsGrid').ejGrid({dataSource:ba,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'slug',headerText:i.slug,width:250}],rowSelected:function rowSelected(a){if(!R.service){R.page=a.model.pageSettings.currentPage;var b=R.pids[R.page].slice(0),c=b.indexOf(a.data.slug);-1<c?R.removePid(a.data.slug):R.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=R.ids.slice(0);if(R.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(R.page=a.currentPage,R.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(R.page=1,R.pids=this.model.currentViewData[c].slug));R.service=!1}}).data('ejGrid'),ia=b('#tagsGrid').ejGrid({dataSource:ca,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'slug',headerText:i.slug,width:250}],rowSelected:function rowSelected(a){if(!T.service){T.page=a.model.pageSettings.currentPage;var b=T.pids[T.page].slice(0),c=b.indexOf(a.data.slug);-1<c?T.removePid(a.data.slug):T.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=T.ids.slice(0);if(T.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(T.page=a.currentPage,T.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(T.page=1,T.pids=this.model.currentViewData[c].slug));T.service=!1}}).data('ejGrid'),ja=b('#authorsGrid').ejGrid({dataSource:da,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.name,width:480},{field:'slug',headerText:i.slug,width:250}],rowSelected:function rowSelected(a){if(!V.service){V.page=a.model.pageSettings.currentPage;var b=V.pids[V.page].slice(0),c=b.indexOf(a.data.slug);-1<c?V.removePid(a.data.slug):V.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=V.ids.slice(0);if(V.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(V.page=a.currentPage,V.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(V.page=1,V.pids=this.model.currentViewData[c].slug));V.service=!1}}).data('ejGrid'),ka=b('#taxGrid').ejGrid({dataSource:ea,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.termName,width:480},{field:'ctax_name',headerText:i.ctName,width:250},{field:'slug',headerText:i.slug,visible:!1}],rowSelected:function rowSelected(a){if(!X.service){X.page=a.model.pageSettings.currentPage;var b=X.pids[X.page].slice(0),c=b.indexOf(a.data.slug);-1<c?X.removePid(a.data.slug):X.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=X.ids.slice(0);if(X.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(X.page=a.currentPage,X.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(X.page=1,X.pids=this.model.currentViewData[c].slug));X.service=!1}}).data('ejGrid'),la=b('#typesGrid').ejGrid({dataSource:fa,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},columns:[{field:'title',headerText:i.ctt,width:480},{field:'slug',headerText:i.ctSlug,width:250}],rowSelected:function rowSelected(a){if(!Z.service){Z.page=a.model.pageSettings.currentPage;var b=Z.pids[Z.page].slice(0),c=b.indexOf(a.data.slug);-1<c?Z.removePid(a.data.slug):Z.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=Z.ids.slice(0);if(Z.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(Z.page=a.currentPage,Z.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(Z.page=1,Z.pids=this.model.currentViewData[c].slug));Z.service=!1}}).data('ejGrid');b('#cancel-posts').on('click',function(){return I.close()}),b('#select-posts').on('click',function(){O.val(P.sid),I.close()}),b('#showPosts').on('click',function(a){a.preventDefault(),P.sid=O.val(),ga.refreshContent(),I.open()}),b('#cancel-cats').on('click',function(){return J.close()}),b('#select-cats').on('click',function(){Q.val(R.sid),J.close()}),b('#showCats').on('click',function(a){a.preventDefault(),R.sid=Q.val(),ha.refreshContent(),J.open()}),b('#cancel-tags').on('click',function(){return K.close()}),b('#select-tags').on('click',function(){S.val(T.sid),K.close()}),b('#showTags').on('click',function(a){a.preventDefault(),T.sid=S.val(),ia.refreshContent(),K.open()}),b('#cancel-authors').on('click',function(){L.close()}),b('#select-authors').on('click',function(){U.val(V.sid),L.close()}),b('#showAuthors').on('click',function(a){a.preventDefault(),V.sid=U.val(),ja.refreshContent(),L.open()}),b('#cancel-tax').on('click',function(){return M.close()}),b('#select-tax').on('click',function(){W.val(X.sid),M.close()}),b('#showTaxes').on('click',function(a){a.preventDefault(),X.sid=W.val(),ka.refreshContent(),M.open()}),b('#cancel-types').on('click',function(){return N.close()}),b('#select-types').on('click',function(){Y.val(Z.sid),N.close()}),b('#showTypes').on('click',function(a){a.preventDefault(),Z.sid=Y.val(),la.refreshContent(),N.open()});var ma=b('#sdate'),na=b('#fdate'),oa=b('#startDate').ejDateTimePicker({width:250,locale:h,buttonText:options.buttonText,dateTimeFormat:'yyyy-MM-dd HH:mm:ss',timeDisplayFormat:'HH:mm:ss',value:ma.val(),change:function change(a){ma.val(a.value)}}).data('ejDateTimePicker'),pa=b('#finishDate').ejDateTimePicker({width:250,locale:h,buttonText:options.buttonText,dateTimeFormat:'yyyy-MM-dd HH:mm:ss',timeDisplayFormat:'HH:mm:ss',value:na.val(),change:function change(a){na.val(a.value)}}).data('ejDateTimePicker'),qa=b('#custom-users'),ra=b('input:radio[name=users]'),sa=b('#x-reg-users'),ta=b('#users_reg'),ua=b('#x-view-users'),va=b('#xusers');ra.on('click',function(){var a=parseInt(b('input:radio[name=users]:checked').val(),10);0===a?qa.hide('blind',{direction:'vertical'},500):qa.show('blind',{direction:'vertical'},500)}),ta.on('click',function(){ta.is(':checked')?sa.show('blind',{direction:'vertical'},500):sa.hide('blind',{direction:'vertical'},500)}),va.on('click',function(){va.is(':checked')?ua.show('blind',{direction:'vertical'},500):ua.hide('blind',{direction:'vertical'},500)});var wa=b('#xvusers'),xa=new Selectors;xa.sid=wa.val();var ya=b('#usersDialog').ejDialog(H).data('ejDialog'),za='&subscriber='+encodeURI(e.subscriber)+'&contributor='+encodeURI(e.contributor)+'&author='+encodeURI(e.author)+'&editor='+encodeURI(e.editor)+'&admin='+encodeURI(e.admin)+'&sadmin='+encodeURI(e.superAdmin),Aa=ej.DataManager({url:ajaxurl+'?action=load_users&sam_pro_nonce='+options.samProNonce+za,requestType:'json',adaptor:new ej.UrlAdaptor}),Ba=b('#usersGrid').ejGrid({dataSource:Aa,locale:h,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'id',headerText:'ID',textAlign:ej.TextAlign.Right,width:70},{field:'title',headerText:i.display,width:330},{field:'slug',headerText:i.user,width:250},{field:'role',headerText:i.role,width:150}],rowSelected:function rowSelected(a){if(!xa.service){xa.page=a.model.pageSettings.currentPage;var b=xa.pids[xa.page].slice(0),c=b.indexOf(a.data.slug);-1<c?xa.removePid(a.data.slug):xa.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=xa.ids.slice(0);if(xa.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(xa.page=a.currentPage,xa.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(xa.page=1,xa.pids=this.model.currentViewData[c].slug));xa.service=!1}}).data('ejGrid');b('#cancel-users').on('click',function(){return ya.close()}),b('#select-users').on('click',function(){wa.val(xa.sid),ya.close()}),b('#showXUsers').on('click',function(a){a.preventDefault(),xa.sid=wa.val(),Ba.refreshContent(),ya.open()});var Ca=options.advertisers,Da=b('#advertsDialog').ejDialog(H).data('ejDialog'),Ea=b('#advertsGrid').ejGrid({dataSource:ej.DataManager(Ca),locale:h,allowSorting:!0,allowSelection:!0,allowFiltering:!0,filterSettings:{filterType:'menu'},selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:options.itemsPerPage},columns:[{field:'owner',headerText:i.nick},{field:'owner_name',headerText:i.display},{field:'owner_mail',headerText:i.mail}]}).data('ejGrid');b('#select-adverts').on('click',function(){var a=Ea.model.selectedRecords;if(1===a.length){var c=a[0];b('#owner').val(c.owner),b('#owner_name').val(c.owner_name),b('#owner_mail').val(c.owner_mail)}Da.close()}),b('#cancel-adverts').on('click',function(){return Da.close()}),b('#showAdvertisers').on('click',function(a){a.preventDefault(),Da.open()});var Fa=b('#swf'),Ga=b('#swf-params'),Ha=b('#link');Fa.on('click',function(){Fa.is(':checked')?Ga.show('blind',{direction:'vertical'},500):Ga.hide('blind',{direction:'vertical'},500)});var Ia,Ja=b('#click-tag'),Ka=b('#swf_vars');Ha.on('change',function(){''===g.value?Ja.prop('disabled',!0):Ja.prop('disabled',!1)}),Ja.on('click',function(a){a.preventDefault();var b=Ka.val();Ia=Ha.val(),''===b?Ka.val('{clickTAG: escape("'+Ia+'")}'):Ka.val(b.replace('}',', clickTAG: escape("'+Ia+'")}')),Ha.val('')})})})(jQuery);

//# sourceMappingURL=sam.pro.ad.editor.min.js.map