'use strict';var zoneRules=options.rules.rules,singleRules=options.rules.single,item=options.item,places=options.places,pageSize=options.itemsPerPage;(function(a){var b=options.locale.changeLocale?options.locale.locale:'en-US',c=options.strings;a(document).ready(function(){var d,e,f=a('#rulesDialog').ejDialog({width:830,allowDraggable:!0,enableModal:!0,showOnInit:!1}).data('ejDialog'),g=a('#singleDialog').ejDialog({width:830,allowDraggable:!0,enableModal:!0,showOnInit:!1}).data('ejDialog'),h=new Selectors,k=new Selectors;h.sid='',k.sid='',d=a('#rulesGrid').ejGrid({dataSource:zoneRules,locale:b,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:pageSize},columns:[{field:'slug',visible:!1},{field:'tax',headerText:c.type},{field:'name',headerText:c.name},{field:'term_slug',visible:!1},{field:'priority',visible:!1}],rowSelected:function rowSelected(a){if(!h.service){h.page=a.model.pageSettings.currentPage;var b=h.pids[h.page].slice(0),c=b.indexOf(a.data.slug);-1<c?h.removePid(a.data.slug):h.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=h.ids.slice(0);if(h.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(h.page=a.currentPage,h.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(h.page=1,h.pids=this.model.currentViewData[c].slug));h.service=!1}}).data('ejGrid'),e=a('#singleGrid').ejGrid({dataSource:singleRules,locale:b,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Multiple,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:pageSize},columns:[{field:'slug',visible:!1},{field:'tax',headerText:c.type},{field:'name',headerText:c.name},{field:'term_slug',visible:!1},{field:'priority',visible:!1}],rowSelected:function rowSelected(a){if(!k.service){k.page=a.model.pageSettings.currentPage;var b=k.pids[k.page].slice(0),c=b.indexOf(a.data.slug);-1<c?k.removePid(a.data.slug):k.pids=a.data.slug}},actionComplete:function actionComplete(a){var b=k.ids.slice(0);if(k.service=!0,0!==b.length)for(var c=0;c<this.model.currentViewData.length;c++)for(var d=0;d<b.length;d++)b[d]===this.model.currentViewData[c].slug&&(this.multiSelectCtrlRequest=!0,this.selectRows(c),'paging'===a.requestType?(k.page=a.currentPage,k.pids=this.model.currentViewData[c].slug):'refresh'===a.requestType&&(k.page=1,k.pids=this.model.currentViewData[c].slug));k.service=!1}}).data('ejGrid'),a('#cancel-rules').on('click',function(){return f.close()}),a('#select-rules').on('click',function(b){b.preventDefault();var c=h.sid,d=c.split(','),e=[];d.forEach(function(a){var b=zoneRules.find(function(b){return b.slug===a});b&&e.push(b)}),0<e.length&&a.post(ajaxurl,{action:'add_zone_rules',zid:item,rules:e,sam_pro_nonce:options.samProNonce}).done(function(){l.refreshContent()}),f.close()}),a('#cancel-single').on('click',function(){return g.close()}),a('#select-single').on('click',function(b){b.preventDefault();var c=k.sid,d=c.split(','),e=[];d.forEach(function(a){var b=singleRules.find(function(b){return b.slug===a});b&&e.push(b)}),0<e.length&&a.post(ajaxurl,{action:'add_zone_single_rules',zid:item,rules:e,sam_pro_nonce:options.samProNonce}).done(function(){return m.refreshContent()}),g.close()});var i=ej.DataManager({url:ajaxurl+'?action=load_zone_rules&item='+item+'&sam_pro_nonce='+options.samProNonce,updateUrl:ajaxurl+'?action=update_zone_rule&item='+item+'&sam_pro_nonce='+options.samProNonce,removeUrl:ajaxurl+'?action=remove_zone_rule&item='+item+'&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),j=ej.DataManager({url:ajaxurl+'?action=load_zone_single_rules&item='+item+'&sam_pro_nonce='+options.samProNonce,updateUrl:ajaxurl+'?action=update_zone_single_rule&item='+item+'&sam_pro_nonce='+options.samProNonce,removeUrl:ajaxurl+'?action=remove_zone_single_rule&item='+item+'&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor}),l=a('#aGrid').ejGrid({dataSource:i,locale:b,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:pageSize},editSettings:{allowEditing:!0,allowDeleting:!0,showDeleteConfirmDialog:!0},toolbarSettings:{showToolbar:!0,toolbarItems:[ej.Grid.ToolBarItems.Edit,ej.Grid.ToolBarItems.Update,ej.Grid.ToolBarItems.Cancel,ej.Grid.ToolBarItems.Delete],customToolbarItems:['Refresh','Add']},toolbarClick:function toolbarClick(b){var c=a(b.target);c.hasClass('Refresh')?this.refreshContent():c.hasClass('Add')&&f.open()},create:function create(){a('.Refresh').parent('li').attr('title',c.refresh),a('.Add').parent('li').attr('title',c.add)},actionComplete:function actionComplete(){var b,c=a('#aGrid_toolbarItems');b=a('#aGrid_delete'),c.ejToolbar('disableItem',b)},recordClick:function recordClick(){var b,c=a('#aGrid_toolbarItems'),d=this.getSelectedRecords(),e=0===d.length?'disableItem':'enableItem';b=a('#aGrid_delete'),c.ejToolbar(e,b)},columns:[{field:'zid',allowEditing:!1,visible:!1},{field:'slug',headerText:c.slug,isPrimaryKey:!0,allowEditing:!1,visible:!1},{field:'single',allowEditing:!1,visible:!1},{field:'priority',headerText:c.priority,allowEditing:!1,visible:!1,width:100},{field:'tax',headerText:c.type,allowEditing:!1},{field:'name',headerText:c.name,allowEditing:!1},{field:'term_slug',allowEditing:!1,visible:!1},{field:'pid',foreignKeyField:'pid',foreignKeyValue:'title',dataSource:places,headerText:c.place,visible:!0}]}).data('ejGrid'),m=a('#sGrid').ejGrid({dataSource:j,locale:b,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},allowPaging:!0,pageSettings:{pageSize:pageSize},editSettings:{allowEditing:!0,allowDeleting:!0,showDeleteConfirmDialog:!0},toolbarSettings:{showToolbar:!0,toolbarItems:[ej.Grid.ToolBarItems.Edit,ej.Grid.ToolBarItems.Update,ej.Grid.ToolBarItems.Cancel,ej.Grid.ToolBarItems.Delete],customToolbarItems:['Refresh','Add']},toolbarClick:function toolbarClick(b){var c=a(b.target);c.hasClass('Refresh')?this.refreshContent():c.hasClass('Add')&&g.open()},create:function create(){a('.Refresh').parent('li').attr('title',c.refresh),a('.Add').parent('li').attr('title',c.add)},actionComplete:function actionComplete(){var b,c=a('#sGrid_toolbarItems');b=a('#sGrid_delete'),c.ejToolbar('disableItem',b)},recordClick:function recordClick(){var b,c=a('#sGrid_toolbarItems'),d=this.getSelectedRecords(),e=0===d.length?'disableItem':'enableItem';b=a('#sGrid_delete'),c.ejToolbar(e,b)},columns:[{field:'zid',allowEditing:!1,visible:!1},{field:'slug',headerText:c.slug,isPrimaryKey:!0,allowEditing:!1,visible:!1},{field:'single',allowEditing:!1,visible:!1},{field:'priority',headerText:c.priority,textAlign:ej.TextAlign.Right,editType:ej.Grid.EditingType.Numeric,width:100},{field:'tax',headerText:c.type,allowEditing:!1},{field:'name',headerText:c.name,allowEditing:!1},{field:'term_slug',allowEditing:!1,visible:!1},{field:'pid',foreignKeyField:'pid',foreignKeyValue:'title',dataSource:places,headerText:c.place,visible:!0}]}).data('ejGrid')})})(jQuery);

//# sourceMappingURL=sam.pro.zone.editor.min.js.map