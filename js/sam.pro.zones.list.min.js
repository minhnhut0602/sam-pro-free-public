(function(n){var i=options.locale.changeLocale?options.locale.locale:"en-US",t=options.strings,r=options.wap;n(document).ready(function(){var u,f=ej.DataManager({url:ajaxurl+"?action=load_zones&sam_pro_nonce="+options.samProNonce,removeUrl:ajaxurl+"?action=remove_zone&sam_pro_nonce="+options.samProNonce,requestType:"json",adaptor:new ej.UrlAdaptor}),r=n("#grid").ejGrid({dataSource:f,locale:i,allowTextWrap:!0,allowPaging:!0,allowSorting:!0,allowFiltering:!0,filterSettings:{filterType:"menu"},pageSettings:{pageSize:options.itemsPerPage},allowSelection:!0,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},editSettings:{allowDeleting:!0,showDeleteConfirmDialog:!0},toolbarSettings:{showToolbar:!0,toolbarItems:[ej.Grid.ToolBarItems.Delete],customToolbarItems:[{templateID:"#viewMode"},"Refresh",{templateID:"#NewZone"},"Edit",{templateID:"#TrashZone"},{templateID:"#UnTrashZone"}]},toolbarClick:function(t){var i=n(t.target),f=this.getSelectedRecords(),s,h,o,c;i.hasClass("Refresh")&&this.refreshContent();i.hasClass("Edit")?f.length>0&&(h=f[0].zid,document.location=options.editorUrl+h):(i.hasClass("zone-to-trash")||i.hasClass("zone-from-trash"))&&(o=i.hasClass("zone-to-trash")?1:0,f.length>0&&(c=parseInt(f[0].trash,10),s=parseInt(f[0].zid,10),c!=o&&n.post(ajaxurl,{action:"trash_zone",zid:s,trash:o,sam_pro_nonce:options.samProNonce}).done(function(){var n=parseInt(e.getSelectedValue(),10);n==0?r._disabledToolItems.push(u[6]):n==1&&r._disabledToolItems.push(u[5]);r.refreshContent()})))},create:function(){var i=n("#grid_toolbarItems");u=i.find("li");n(".zone-to-trash").parent("li").attr("title",t.moveToTrash);n(".zone-from-trash").parent("li").attr("title",t.restoreFromTrash);n('li[title="viewMode"]').attr("title",t.viewMode);n('li[title="NewZone"]').attr("title",t.newZone);n('li[title="Edit"]').attr("title",t.edit);n(".Refresh").parent("li").attr("title",t.refresh)},actionComplete:function(){var i=n("#grid_toolbarItems"),t;t=n("#grid_delete");i.ejToolbar("disableItem",t);t=n("#grid_Edit");i.ejToolbar("disableItem",t);t=n("#grid_TrashZone");i.ejToolbar("disableItem",t);t=n("#grid_UnTrashZone");i.ejToolbar("disableItem",t)},recordClick:function(){var i=n("#grid_toolbarItems"),t,u=this.getSelectedRecords(),r=u.length==0?"disableItem":"enableItem";t=n("#grid_delete");i.ejToolbar(r,t);t=n("#grid_Edit");i.ejToolbar(r,t);t=n("#grid_TrashZone");i.ejToolbar(r,t);t=n("#grid_UnTrashZone");i.ejToolbar(r,t)},columns:[{field:"zid",headerText:t.zid,isPrimaryKey:!0,textAlign:ej.TextAlign.Right,allowSorting:!0,allowEditing:!1,width:100},{field:"title",headerText:t.name,allowSorting:!0,allowEditing:!1,width:250},{field:"description",headerText:t.desc,allowSorting:!0,allowEditing:!1},{field:"stat",headerText:t.status,textAlign:ej.TextAlign.Center,allowSorting:!1,allowEditing:!1,allowFiltering:!1,width:100},{field:"trash",headerText:"Status",allowEditing:!1,visible:!1}]}).data("ejGrid"),e=n("#view-mode").ejDropDownList({selectedItemIndex:0,change:function(){var t=parseInt(this.getSelectedValue(),10);t!=10?n("#grid").ejGrid("model.query",(new ej.Query).where("trash",ej.FilterOperators.equal,t,10)):n("#grid").ejGrid("model.query",new ej.Query);t==0?r._disabledToolItems.push(u[6]):t==1&&r._disabledToolItems.push(u[5]);r.refreshContent(!0)}}).data("ejDropDownList")})})(jQuery)