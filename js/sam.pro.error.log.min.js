'use strict';(function(a){var b=options.locale.changeLocale?options.locale.locale:'en-US';a(document).ready(function(){var c,d,e=a('#info-dialog'),f=a('#info-body'),g={width:830,allowDraggable:!0,enableModal:!0,showOnInit:!1,closeIconTooltip:options.close},h=ej.DataManager({url:ajaxurl+'?action=load_error_log&sam_pro_nonce='+options.samProNonce,removeUrl:ajaxurl+'?action=remove_error&sam_pro_nonce='+options.samProNonce,requestType:'json',adaptor:new ej.UrlAdaptor});f.html(function(){return'<div style="margin: 10px 10px 10px 0;">\n        <div style="margin: 10px 0;">\n        <aside id="info-img" style="float: left; width: 80px; font-size: 50px;"></aside>\n        <div style="padding-left: 80px">\n        <p><strong>'+options.date+'</strong>: <span id="el-date"></span></p>\n        <p><strong>'+options.table+'</strong>: <span id="el-table"></span></p>\n        <p><strong>'+options.etype[0]+'</strong>: <span id="el-type"></span></p>\n        <p><strong>'+options.msg+'</strong>:<br><span id="el-msg"></span></p>\n        <p><strong>'+options.sql+'</strong>:</p>\n        <textarea id="el-sql" style="width: 100%; height: 270px;" readonly></textarea>\n        </div></div></div>'}),c=e.ejDialog(g).data('ejDialog'),a('#close-dialog').on('click',function(){c.close()});var i=a('#grid').ejGrid({dataSource:h,locale:b,allowTextWrap:!0,allowPaging:!0,allowSorting:!0,pageSettings:{pageSize:options.itemsPerPage},allowSelection:!0,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},editSettings:{allowDeleting:!0},toolbarSettings:{showToolbar:!0,toolbarItems:[ej.Grid.ToolBarItems.Delete],customToolbarItems:[{templateID:'#viewMode'},'Refresh',{templateID:'#MoreInfo'},{templateID:'#ErrorSolved'},{templateID:'#ClearErrors'}]},actionComplete:function actionComplete(){var b,c=a('#grid_toolbarItems');b=a('#grid_delete'),c.ejToolbar('disableItem',b),b=a('#grid_MoreInfo'),c.ejToolbar('disableItem',b),b=a('#grid_ErrorSolved'),c.ejToolbar('disableItem',b)},recordClick:function recordClick(){var b,c=a('#grid_toolbarItems'),d=this.getSelectedRecords(),e=0===d.length?'disableItem':'enableItem';b=a('#grid_delete'),c.ejToolbar(e,b),b=a('#grid_MoreInfo'),c.ejToolbar(e,b),b=a('#grid_ErrorSolved'),c.ejToolbar(e,b)},toolbarClick:function toolbarClick(b){var e,f=a(b.target),g=this.getSelectedRecords();if(f.hasClass('Refresh'))this.refreshContent();else if(f.hasClass('more-info')){if(0<g.length){var h=parseInt(g[0].etype,10);e=parseInt(g[0].solved,10),a('#info-img').html(function(){return 1===h?'<i class=\'icon-ok\'></i>':1===e?'<i class=\'icon-shield\'></i>':'<i class=\'icon-attention\'></i>'}),a('#el-date').text(g[0].edate),a('#el-table').text(g[0].tname),a('#el-type').text(options.alts[h]),a('#el-msg').text(g[0].emsg),a('#el-sql').html(g[0].esql),c.open()}}else if(f.hasClass('error-solved'))0<g.length&&(e=parseInt(g[0].solved,10),0===e&&a.post(ajaxurl,{action:'solve_error',eid:parseInt(g[0].eid,10),sam_pro_nonce:options.samProNonce}).done(function(a){a.success&&i.refreshContent()}));else if(f.hasClass('clear-errors'))a.post(ajaxurl,{action:'clear_error_log',sam_pro_nonce:options.samProNonce}).done(function(a){a.success&&i.refreshContent()});else if(f.hasClass('Edit')){if(0<g.length){var k=g[0].aid;document.location=options.editorUrl+k}}else if(f.hasClass('place-to-trash')||f.hasClass('place-from-trash')){var l=f.hasClass('place-to-trash')?1:0;if(0<g.length){var m=parseInt(g[0].trash,10);aid=parseInt(g[0].aid,10),m!==l&&a.post(ajaxurl,{action:'trash_ad',aid:aid,trash:l,sam_pro_nonce:options.samProNonce}).done(function(){var a=parseInt(j.getSelectedValue(),10);0===a?i._disabledToolItems.push(d[8]):1===a&&i._disabledToolItems.push(d[7]),i.refreshContent()})}}else if(f.hasClass('ad-moderate')||f.hasClass('ad-unmoderate')){var n=f.hasClass('ad-moderate')?1:0;if(0<g.length){var o=parseInt(g[0].moderated,10);aid=parseInt(g[0].aid,10),o!==n&&a.post(ajaxurl,{action:'moderate_ad',aid:aid,mod:n,sam_pro_nonce:options.samProNonce}).done(function(){i.refreshContent()})}}},create:function create(){var b=a('#grid_toolbarItems');d=b.find('li'),a('.more-info').parent('li').attr('title',options.moreInfo),a('.error-solved').parent('li').attr('title',options.setSolved),a('.clear-errors').parent('li').attr('title',options.clearLog),a('.ad-unmoderate').parent('li').attr('title',options.cancelApproval),a('li[title="viewMode"]').attr('title',options.viewMode),a('.Refresh').parent('li').attr('title',options.refresh)},columns:[{field:'eid',headerText:options.id,isPrimaryKey:!0,textAlign:ej.TextAlign.Right,allowSorting:!0,allowEditing:!1,width:100},{field:'stype',headerText:options.etype[1],textAlign:ej.TextAlign.Center,allowSorting:!0,allowEditing:!1,width:100},{field:'edate',headerText:options.date,allowSorting:!0,allowEditing:!1,width:150},{field:'tname',headerText:options.table,allowSorting:!0,allowEditing:!1,width:170},{field:'emsg',headerText:options.msg,allowSorting:!0,allowEditing:!1},{field:'etype',headerText:options.status,allowSorting:!1,allowEditing:!1,visible:!1},{field:'esql',headerText:options.sql,allowSorting:!1,allowEditing:!1,visible:!1},{field:'solved',headerText:options.status,allowEditing:!1,visible:!1}]}).data('ejGrid'),j=a('#view-mode').ejDropDownList({selectedItemIndex:0,change:function change(){var b=parseInt(this.getSelectedValue(),10);10===b?a('#grid').ejGrid('model.query',new ej.Query):a('#grid').ejGrid('model.query',new ej.Query().where('etype',ej.FilterOperators.equal,b,10)),i.refreshContent(!0)}}).data('ejDropDownList')})})(jQuery);

//# sourceMappingURL=sam.pro.error.log.min.js.map