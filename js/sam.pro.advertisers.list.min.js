(function(n){var i=ajaxurl,r=options.locale.changeLocale?options.locale.locale:"en-US",t=options.strings;n(document).ready(function(){var u=ej.DataManager({url:i+"?action=list_adverts&sam_pro_nonce="+options.samProNonce,requestType:"json",adaptor:new ej.UrlAdaptor}),f=ej.DataManager({url:i+"?action=list_adverts_ads&sam_pro_nonce="+options.samProNonce,requestType:"json",adaptor:new ej.UrlAdaptor}),e=n("#grid").ejGrid({dataSource:u,locale:r,allowTextWrap:!0,allowPaging:!0,allowFiltering:!0,filterSettings:{filterType:"menu"},pageSettings:{pageSize:options.itemsPerPage},allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},toolbarSettings:{showToolbar:!0,customToolbarItems:["Expand","Collapse","Refresh","Stats","SendMail"]},columns:[{field:"owner",headerText:t.advertiser,isPrimaryKey:!0},{field:"owner_name",headerText:t.display}],actionComplete:function(){var i=n("#grid_toolbarItems"),t;t=n("#grid_Stats");i.ejToolbar("disableItem",t);t=n("#grid_TestPage");i.ejToolbar("disableItem",t);t=n("#grid_SendMail");i.ejToolbar("disableItem",t)},recordClick:function(){var i=n("#grid_toolbarItems"),t,u=this.getSelectedRecords(),r=u.length==0?"disableItem":"enableItem";t=n("#grid_Stats");i.ejToolbar(r,t);t=n("#grid_TestPage");i.ejToolbar(r,t);t=n("#grid_SendMail");i.ejToolbar(r,t)},rowSelected:function(t){var i=t;n("#owner").val(t.data.owner);n("#mail_to").val(t.data.owner)},toolbarClick:function(t){var i=n(t.target),f=this.getSelectedRecords(),r,u;i.hasClass("Expand")?this.expandAll():i.hasClass("Collapse")?this.collapseAll():i.hasClass("Refresh")?(this.refreshContent(),n("#owner").val(""),n("#mail_to").val("")):i.hasClass("Stats")?(r=n("#owner").val(),f.length!=0&&"undefined"!=typeof r&&r!=""&&document.getElementById("stats").submit()):i.hasClass("SendMail")&&(u=n("#mail_to").val(),f.length!=0&&"undefined"!=typeof u&&u!=""&&document.getElementById("send_mail").submit())},create:function(){var i=n("#grid_toolbarItems");lis=i.find("li");n(".Expand").parent("li").attr("title",t.expand);n(".Collapse").parent("li").attr("title",t.collapse);n(".Refresh").parent("li").attr("title",t.refresh);n(".Stats").parent("li").attr("title",t.statistics);n(".SendMail").parent("li").attr("title",t.sendMail)},childGrid:{dataSource:f,locale:r,queryString:"owner",allowTextWrap:!0,allowSorting:!0,allowSelection:!0,selectionType:ej.Grid.SelectionType.Single,selectionSettings:{selectionMode:[ej.Grid.SelectionMode.Row],enableToggle:!0},columns:[{field:"owner",isPrimaryKey:!0,visible:!1},{field:"aid",headerText:t.adId,textAlign:ej.TextAlign.Right,width:100},{field:"title",headerText:t.name,allowEditing:!1,width:250},{field:"description",headerText:t.desc},{field:"asize",headerText:t.size,width:200},{field:"status",headerText:t.status,textAlign:ej.TextAlign.Center,width:100}]}}).data("ejGrid")})})(jQuery)